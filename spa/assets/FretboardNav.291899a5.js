import{Q as Ss}from"./use-form.e77711fb.js";import{u as Ps,b as Bs,Q as lt,a as es,R as wt,d as Ti,e as Oi,f as Ei}from"./QBtn.d8693490.js";import{u as Ls,a as qs,c as zs,b as Di,Q as j,h as Nt,i as Pe}from"./QItemSection.f5a00df6.js";import{Q as dt}from"./QItem.75ce8941.js";import{u as ki,a as Ci,b as Ai,c as Gi,r as _s,d as vs,e as Mi,f as Pi,Q as Pt,g as be,h as we}from"./QSeparator.107df950.js";import{c as gt,g as Fs,d as Vs,h as Ft,b as Bi}from"./use-router-link.70840599.js";import{h as I,j as A,i as Hs,g as Vt,q as Li,a2 as js,r as qt,x as qi,u as zi,V as Fi,w as Be,p as Vi,T as Ns,n as Hi,_ as ji,z as Yi,A as W,B as pt,C as y,D as p,H as Tt,G as Le,v as bt,I as Se,J as Rs,L as Is,a3 as $i,F as mt,a4 as Xi,a5 as Ui}from"./index.6e68d1cc.js";import{Q as Qi}from"./selection.fce6b4bb.js";import{u as Ys,a as $s}from"./use-dark.0a5a8e5f.js";import{u as Zi,a as Wi}from"./use-prevent-scroll.1e6fc920.js";import{Q as Ki}from"./QPage.ebc74488.js";var Zt=gt({name:"QAvatar",props:{...Ps,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(e,{slots:t}){const s=Bs(e),i=I(()=>"q-avatar"+(e.color?` bg-${e.color}`:"")+(e.textColor?` text-${e.textColor} q-chip--colored`:"")+(e.square===!0?" q-avatar--square":e.rounded===!0?" rounded-borders":"")),n=I(()=>e.fontSize?{fontSize:e.fontSize}:null);return()=>{const r=e.icon!==void 0?[A(lt,{name:e.icon})]:void 0;return A("div",{class:i.value,style:s.value},[A("div",{class:"q-avatar__content row flex-center overflow-hidden",style:n.value},Fs(t.default,r))])}}});const Ji=["top","right","bottom","left"],Xs={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>Ji.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Us(e,t){return{formClass:I(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:I(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:I(()=>{if(e.externalLabel===!0){const s=e.hideLabel===null?t.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(s===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const Qs={start:"self-end",center:"self-center",end:"self-start"},tn=Object.keys(Qs);var Ts=gt({name:"QFabAction",props:{...Xs,icon:{type:String,default:""},anchor:{type:String,validator:e=>tn.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:t,emit:s}){const i=Hs(js,()=>({showing:{value:!0},onChildClick:Li})),{formClass:n,labelProps:r}=Us(e,i.showing),o=I(()=>{const u=Qs[e.anchor];return n.value+(u!==void 0?` ${u}`:"")}),h=I(()=>e.disable===!0||i.showing.value!==!0);function a(u){i.onChildClick(u),s("click",u)}function l(){const u=[];return t.icon!==void 0?u.push(t.icon()):e.icon!==""&&u.push(A(lt,{name:e.icon})),(e.label!==""||t.label!==void 0)&&u[r.value.action](A("div",r.value.data,t.label!==void 0?t.label():[e.label])),Vs(t.default,u)}const c=Vt();return Object.assign(c.proxy,{click:a}),()=>A(es,{class:o.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:h.value,onClick:a},l)}});const en=["up","right","down","left"],sn=["left","center","right"];var nn=gt({name:"QFab",props:{...Xs,...Ls,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:e=>en.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>sn.includes(e)}},emits:qs,setup(e,{slots:t}){const s=qt(null),i=qt(e.modelValue===!0),{proxy:{$q:n}}=Vt(),{formClass:r,labelProps:o}=Us(e,i),h=I(()=>e.persistent!==!0),{hide:a,toggle:l}=zs({showing:i,hideOnRouteChange:h}),c=I(()=>({opened:i.value})),u=I(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${r.value}`+(i.value===!0?" q-fab--opened":" q-fab--closed")),f=I(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${i.value===!0?"opened":"closed"}`),m=I(()=>`q-fab__icon-holder  q-fab__icon-holder--${i.value===!0?"opened":"closed"}`);function N(d,k){const B=t[d],q=`q-fab__${d} absolute-full`;return B===void 0?A(lt,{class:q,name:e[k]||n.iconSet.fab[k]}):A("div",{class:q},B(c.value))}function b(){const d=[];return e.hideIcon!==!0&&d.push(A("div",{class:m.value},[N("icon","icon"),N("active-icon","activeIcon")])),(e.label!==""||t.label!==void 0)&&d[o.value.action](A("div",o.value.data,t.label!==void 0?t.label(c.value):[e.label])),Vs(t.tooltip,d)}return qi(js,{showing:i,onChildClick(d){a(d),s.value!==null&&s.value.$el.focus()}}),()=>A("div",{class:u.value},[A(es,{ref:s,class:r.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":i.value===!0?"true":"false","aria-haspopup":"true",onClick:l},b),A("div",{class:f.value},Ft(t.default))])}});const rn={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function on(){const{props:e,proxy:{$q:t}}=Vt(),s=Hs(zi,()=>{console.error("QPageSticky needs to be child of QLayout")}),i=I(()=>{const u=e.position;return{top:u.indexOf("top")>-1,right:u.indexOf("right")>-1,bottom:u.indexOf("bottom")>-1,left:u.indexOf("left")>-1,vertical:u==="top"||u==="bottom",horizontal:u==="left"||u==="right"}}),n=I(()=>s.header.offset),r=I(()=>s.right.offset),o=I(()=>s.footer.offset),h=I(()=>s.left.offset),a=I(()=>{let u=0,f=0;const m=i.value,N=t.lang.rtl===!0?-1:1;m.top===!0&&n.value!==0?f=`${n.value}px`:m.bottom===!0&&o.value!==0&&(f=`${-o.value}px`),m.left===!0&&h.value!==0?u=`${N*h.value}px`:m.right===!0&&r.value!==0&&(u=`${-N*r.value}px`);const b={transform:`translate(${u}, ${f})`};return e.offset&&(b.margin=`${e.offset[1]}px ${e.offset[0]}px`),m.vertical===!0?(h.value!==0&&(b[t.lang.rtl===!0?"right":"left"]=`${h.value}px`),r.value!==0&&(b[t.lang.rtl===!0?"left":"right"]=`${r.value}px`)):m.horizontal===!0&&(n.value!==0&&(b.top=`${n.value}px`),o.value!==0&&(b.bottom=`${o.value}px`)),b}),l=I(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function c(u){const f=Ft(u.default);return A("div",{class:l.value,style:a.value},e.expand===!0?f:[A("div",f)])}return{$layout:s,getStickyContent:c}}var hn=gt({name:"QPageSticky",props:rn,setup(e,{slots:t}){const{getStickyContent:s}=on();return()=>s(t)}});const an={xs:8,sm:10,md:14,lg:20,xl:24};var ln=gt({name:"QChip",props:{...Ys,...Ps,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:s}){const{proxy:{$q:i}}=Vt(),n=$s(e,i),r=Bs(e,an),o=I(()=>e.selected===!0||e.icon!==void 0),h=I(()=>e.selected===!0?e.iconSelected||i.iconSet.chip.selected:e.icon),a=I(()=>e.iconRemove||i.iconSet.chip.remove),l=I(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),c=I(()=>{const d=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(d?` text-${d} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(l.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(n.value===!0?" q-chip--dark q-dark":"")}),u=I(()=>e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0});function f(d){d.keyCode===13&&m(d)}function m(d){e.disable||(s("update:selected",!e.selected),s("click",d))}function N(d){(d.keyCode===void 0||d.keyCode===13)&&(Fi(d),e.disable===!1&&(s("update:modelValue",!1),s("remove")))}function b(){const d=[];l.value===!0&&d.push(A("div",{class:"q-focus-helper"})),o.value===!0&&d.push(A(lt,{class:"q-chip__icon q-chip__icon--left",name:h.value}));const k=e.label!==void 0?[A("div",{class:"ellipsis"},[e.label])]:void 0;return d.push(A("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Fs(t.default,k))),e.iconRight&&d.push(A(lt,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&d.push(A(lt,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:a.value,...u.value,onClick:N,onKeyup:N})),d}return()=>{if(e.modelValue===!1)return;const d={class:c.value,style:r.value};return l.value===!0&&Object.assign(d,u.value,{onClick:m,onKeyup:f}),Bi("div",d,b(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[wt,e.ripple]])}}}),un=gt({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const s=I(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>A(e.tag,{class:s.value},Ft(t.default))}}),cn=gt({name:"QCardActions",props:{...Ti,vertical:Boolean},setup(e,{slots:t}){const s=Oi(e),i=I(()=>`q-card__actions ${s.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>A("div",{class:i.value},Ft(t.default))}}),fn=gt({name:"QCard",props:{...Ys,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const{proxy:{$q:s}}=Vt(),i=$s(e,s),n=I(()=>"q-card"+(i.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>A(e.tag,{class:n.value},Ft(t.default))}});let _e=0;const dn={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},Os={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var pn=gt({name:"QDialog",inheritAttrs:!1,props:{...Ls,...ki,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:e=>e==="standard"||["top","bottom","left","right"].includes(e)}},emits:[...qs,"shake","click","escape-key"],setup(e,{slots:t,emit:s,attrs:i}){const n=Vt(),r=qt(null),o=qt(!1),h=qt(!1),a=qt(!1);let l,c=null,u,f;const m=I(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:N}=Wi(),{registerTimeout:b,removeTimeout:d}=Di(),{registerTick:k,removeTick:B}=Ci(),{showPortal:q,hidePortal:X,portalIsAccessible:V,renderPortal:Q}=Ai(n,r,ft,!0),{hide:et}=zs({showing:o,hideOnRouteChange:m,handleShow:me,handleHide:x,processOnMount:!0}),{addToHistory:ct,removeFromHistory:Gt}=Zi(o,et,m),le=I(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${dn[e.position]}`+(a.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),ue=I(()=>"q-transition--"+(e.transitionShow===void 0?Os[e.position][0]:e.transitionShow)),ce=I(()=>"q-transition--"+(e.transitionHide===void 0?Os[e.position][1]:e.transitionHide)),fe=I(()=>h.value===!0?ce.value:ue.value),Xt=I(()=>`--q-transition-duration: ${e.transitionDuration}ms`),Mt=I(()=>o.value===!0&&e.seamless!==!0),de=I(()=>e.autoClose===!0?{onClick:st}:{}),pe=I(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${Mt.value===!0?"modal":"seamless"}`,i.class]);Be(o,R=>{Hi(()=>{h.value=R})}),Be(()=>e.maximized,R=>{o.value===!0&&H(R)}),Be(Mt,R=>{N(R),R===!0?(Mi(at),Pi(Z)):(_s(at),vs(Z))});function me(R){d(),B(),ct(),c=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,H(e.maximized),q(),a.value=!0,e.noFocus!==!0&&(document.activeElement!==null&&document.activeElement.blur(),k(E)),b(()=>{if(n.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:it,bottom:Ut}=document.activeElement.getBoundingClientRect(),{innerHeight:ge}=window,Qt=window.visualViewport!==void 0?window.visualViewport.height:ge;it>0&&Ut>Qt/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-Qt,Ut>=ge?1/0:Math.ceil(document.scrollingElement.scrollTop+Ut-Qt/2))),document.activeElement.scrollIntoView()}f=!0,r.value.click(),f=!1}q(!0),a.value=!1,s("show",R)},e.transitionDuration)}function x(R){d(),B(),Gt(),ot(!0),a.value=!0,X(),c!==null&&(c.focus(),c=null),b(()=>{X(!0),a.value=!1,s("hide",R)},e.transitionDuration)}function E(R){Gi(()=>{let it=r.value;it===null||it.contains(document.activeElement)===!0||(it=it.querySelector(R||"[autofocus], [data-autofocus]")||it,it.focus({preventScroll:!0}))})}function z(){E(),s("shake");const R=r.value;R!==null&&(R.classList.remove("q-animate--scale"),R.classList.add("q-animate--scale"),clearTimeout(l),l=setTimeout(()=>{r.value!==null&&(R.classList.remove("q-animate--scale"),E())},170))}function Z(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&z():(s("escape-key"),et()))}function ot(R){clearTimeout(l),(R===!0||o.value===!0)&&(H(!1),e.seamless!==!0&&(N(!1),_s(at),vs(Z))),R!==!0&&(c=null)}function H(R){R===!0?u!==!0&&(_e<1&&document.body.classList.add("q-body--dialog"),_e++,u=!0):u===!0&&(_e<2&&document.body.classList.remove("q-body--dialog"),_e--,u=!1)}function st(R){f!==!0&&(et(R),s("click",R))}function S(R){e.persistent!==!0&&e.noBackdropDismiss!==!0?et(R):e.noShake!==!0&&z()}function at(R){e.allowFocusOutside!==!0&&V.value===!0&&Ei(r.value,R.target)!==!0&&E('[tabindex]:not([tabindex="-1"])')}Object.assign(n.proxy,{focus:E,shake:z,__updateRefocusTarget(R){c=R||null}}),Vi(ot);function ft(){return A("div",{...i,class:pe.value},[A(Ns,{name:"q-transition--fade",appear:!0},()=>Mt.value===!0?A("div",{class:"q-dialog__backdrop fixed-full",style:Xt.value,"aria-hidden":"true",onMousedown:S}):null),A(Ns,{name:fe.value,appear:!0},()=>o.value===!0?A("div",{ref:r,class:le.value,style:Xt.value,tabindex:-1,...de.value},Ft(t.default)):null)])}return Q}});const Ye={},Zs=[];function v(e,t){if(Array.isArray(e)){for(const s of e)v(s,t);return}if(typeof e=="object"){for(const s in e)v(s,e[s]);return}Ws(Object.getOwnPropertyNames(t)),Ye[e]=Object.assign(Ye[e]||{},t)}function U(e){return Ye[e]||{}}function mn(){return[...new Set(Zs)]}function Ws(e){Zs.push(...e)}function ss(e,t){let s;const i=e.length,n=[];for(s=0;s<i;s++)n.push(t(e[s]));return n}function gn(e,t){let s;const i=e.length,n=[];for(s=0;s<i;s++)t(e[s])&&n.push(e[s]);return n}function qe(e){return e%360*Math.PI/180}function ve(e){return e.toLowerCase().replace(/-(.)/g,function(t,s){return s.toUpperCase()})}function yn(e){return e.replace(/([A-Z])/g,function(t,s){return"-"+s.toLowerCase()})}function Ht(e){return e.charAt(0).toUpperCase()+e.slice(1)}function jt(e,t,s,i){return(t==null||s==null)&&(i=i||e.bbox(),t==null?t=i.width/i.height*s:s==null&&(s=i.height/i.width*t)),{width:t,height:s}}function $e(e,t){const s=e.origin;let i=e.ox!=null?e.ox:e.originX!=null?e.originX:"center",n=e.oy!=null?e.oy:e.originY!=null?e.originY:"center";s!=null&&([i,n]=Array.isArray(s)?s:typeof s=="object"?[s.x,s.y]:[s,s]);const r=typeof i=="string",o=typeof n=="string";if(r||o){const{height:h,width:a,x:l,y:c}=t.bbox();r&&(i=i.includes("left")?l:i.includes("right")?l+a:l+a/2),o&&(n=n.includes("top")?c:n.includes("bottom")?c+h:c+h/2)}return[i,n]}const is="http://www.w3.org/2000/svg",xn="http://www.w3.org/1999/xhtml",Ne="http://www.w3.org/2000/xmlns/",Yt="http://www.w3.org/1999/xlink",bn="http://svgjs.dev/svgjs",O={window:typeof window=="undefined"?null:window,document:typeof document=="undefined"?null:document};class ns{}const Et={},rs="___SYMBOL___ROOT___";function te(e,t=is){return O.document.createElementNS(t,e)}function Y(e,t=!1){if(e instanceof ns)return e;if(typeof e=="object")return ze(e);if(e==null)return new Et[rs];if(typeof e=="string"&&e.charAt(0)!=="<")return ze(O.document.querySelector(e));const s=t?O.document.createElement("div"):te("svg");return s.innerHTML=e,e=ze(s.firstChild),s.removeChild(s.firstChild),e}function M(e,t){return t&&t.ownerDocument&&t instanceof t.ownerDocument.defaultView.Node?t:te(e)}function rt(e){if(!e)return null;if(e.instance instanceof ns)return e.instance;if(e.nodeName==="#document-fragment")return new Et.Fragment(e);let t=Ht(e.nodeName||"Dom");return t==="LinearGradient"||t==="RadialGradient"?t="Gradient":Et[t]||(t="Dom"),new Et[t](e)}let ze=rt;function T(e,t=e.name,s=!1){return Et[t]=e,s&&(Et[rs]=e),Ws(Object.getOwnPropertyNames(e.prototype)),e}function wn(e){return Et[e]}let Sn=1e3;function Ks(e){return"Svgjs"+Ht(e)+Sn++}function Js(e){for(let t=e.children.length-1;t>=0;t--)Js(e.children[t]);return e.id&&(e.id=Ks(e.nodeName)),e}function w(e,t){let s,i;for(e=Array.isArray(e)?e:[e],i=e.length-1;i>=0;i--)for(s in t)e[i].prototype[s]=t[s]}function G(e){return function(...t){const s=t[t.length-1];return s&&s.constructor===Object&&!(s instanceof Array)?e.apply(this,t.slice(0,-1)).attr(s):e.apply(this,t)}}function _n(){return this.parent().children()}function vn(){return this.parent().index(this)}function Nn(){return this.siblings()[this.position()+1]}function Rn(){return this.siblings()[this.position()-1]}function In(){const e=this.position();return this.parent().add(this.remove(),e+1),this}function Tn(){const e=this.position();return this.parent().add(this.remove(),e?e-1:0),this}function On(){return this.parent().add(this.remove()),this}function En(){return this.parent().add(this.remove(),0),this}function Dn(e){e=Y(e),e.remove();const t=this.position();return this.parent().add(e,t),this}function kn(e){e=Y(e),e.remove();const t=this.position();return this.parent().add(e,t+1),this}function Cn(e){return e=Y(e),e.before(this),this}function An(e){return e=Y(e),e.after(this),this}v("Dom",{siblings:_n,position:vn,next:Nn,prev:Rn,forward:In,backward:Tn,front:On,back:En,before:Dn,after:kn,insertBefore:Cn,insertAfter:An});const ti=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,Gn=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Mn=/rgb\((\d+),(\d+),(\d+)\)/,Pn=/(#[a-z_][a-z0-9\-_]*)/i,Bn=/\)\s*,?\s*/,Ln=/\s/g,Es=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,Ds=/^rgb\(/,ks=/^(\s+)?$/,Cs=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,qn=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,yt=/[\s,]+/,os=/[MLHVCSQTAZ]/i;function zn(){const e=this.attr("class");return e==null?[]:e.trim().split(yt)}function Fn(e){return this.classes().indexOf(e)!==-1}function Vn(e){if(!this.hasClass(e)){const t=this.classes();t.push(e),this.attr("class",t.join(" "))}return this}function Hn(e){return this.hasClass(e)&&this.attr("class",this.classes().filter(function(t){return t!==e}).join(" ")),this}function jn(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)}v("Dom",{classes:zn,hasClass:Fn,addClass:Vn,removeClass:Hn,toggleClass:jn});function Yn(e,t){const s={};if(arguments.length===0)return this.node.style.cssText.split(/\s*;\s*/).filter(function(i){return!!i.length}).forEach(function(i){const n=i.split(/\s*:\s*/);s[n[0]]=n[1]}),s;if(arguments.length<2){if(Array.isArray(e)){for(const i of e){const n=ve(i);s[i]=this.node.style[n]}return s}if(typeof e=="string")return this.node.style[ve(e)];if(typeof e=="object")for(const i in e)this.node.style[ve(i)]=e[i]==null||ks.test(e[i])?"":e[i]}return arguments.length===2&&(this.node.style[ve(e)]=t==null||ks.test(t)?"":t),this}function $n(){return this.css("display","")}function Xn(){return this.css("display","none")}function Un(){return this.css("display")!=="none"}v("Dom",{css:Yn,show:$n,hide:Xn,visible:Un});function Qn(e,t,s){if(e==null)return this.data(ss(gn(this.node.attributes,i=>i.nodeName.indexOf("data-")===0),i=>i.nodeName.slice(5)));if(e instanceof Array){const i={};for(const n of e)i[n]=this.data(n);return i}else if(typeof e=="object")for(t in e)this.data(t,e[t]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+e))}catch{return this.attr("data-"+e)}else this.attr("data-"+e,t===null?null:s===!0||typeof t=="string"||typeof t=="number"?t:JSON.stringify(t));return this}v("Dom",{data:Qn});function Zn(e,t){if(typeof arguments[0]=="object")for(const s in e)this.remember(s,e[s]);else{if(arguments.length===1)return this.memory()[e];this.memory()[e]=t}return this}function Wn(){if(arguments.length===0)this._memory={};else for(let e=arguments.length-1;e>=0;e--)delete this.memory()[arguments[e]];return this}function Kn(){return this._memory=this._memory||{}}v("Dom",{remember:Zn,forget:Wn,memory:Kn});function Jn(e){return e.length===4?["#",e.substring(1,2),e.substring(1,2),e.substring(2,3),e.substring(2,3),e.substring(3,4),e.substring(3,4)].join(""):e}function tr(e){const t=Math.round(e),i=Math.max(0,Math.min(255,t)).toString(16);return i.length===1?"0"+i:i}function Bt(e,t){for(let s=t.length;s--;)if(e[t[s]]==null)return!1;return!0}function er(e,t){const s=Bt(e,"rgb")?{_a:e.r,_b:e.g,_c:e.b,_d:0,space:"rgb"}:Bt(e,"xyz")?{_a:e.x,_b:e.y,_c:e.z,_d:0,space:"xyz"}:Bt(e,"hsl")?{_a:e.h,_b:e.s,_c:e.l,_d:0,space:"hsl"}:Bt(e,"lab")?{_a:e.l,_b:e.a,_c:e.b,_d:0,space:"lab"}:Bt(e,"lch")?{_a:e.l,_b:e.c,_c:e.h,_d:0,space:"lch"}:Bt(e,"cmyk")?{_a:e.c,_b:e.m,_c:e.y,_d:e.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return s.space=t||s.space,s}function sr(e){return e==="lab"||e==="xyz"||e==="lch"}function Fe(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}class C{constructor(...t){this.init(...t)}static isColor(t){return t&&(t instanceof C||this.isRgb(t)||this.test(t))}static isRgb(t){return t&&typeof t.r=="number"&&typeof t.g=="number"&&typeof t.b=="number"}static random(t="vibrant",s,i){const{random:n,round:r,sin:o,PI:h}=Math;if(t==="vibrant"){const a=24*n()+57,l=(83-45)*n()+45,c=360*n();return new C(a,l,c,"lch")}else if(t==="sine"){s=s==null?n():s;const a=r(80*o(2*h*s/.5+.01)+150),l=r(50*o(2*h*s/.5+4.6)+200),c=r(100*o(2*h*s/.5+2.3)+150);return new C(a,l,c)}else if(t==="pastel"){const a=8*n()+86,l=(26-9)*n()+9,c=360*n();return new C(a,l,c,"lch")}else if(t==="dark"){const a=10+10*n(),l=(125-75)*n()+86,c=360*n();return new C(a,l,c,"lch")}else if(t==="rgb"){const a=255*n(),l=255*n(),c=255*n();return new C(a,l,c)}else if(t==="lab"){const a=100*n(),l=256*n()-128,c=256*n()-128;return new C(a,l,c,"lab")}else if(t==="grey"){const a=255*n();return new C(a,a,a)}else throw new Error("Unsupported random color mode")}static test(t){return typeof t=="string"&&(Es.test(t)||Ds.test(t))}cmyk(){const{_a:t,_b:s,_c:i}=this.rgb(),[n,r,o]=[t,s,i].map(f=>f/255),h=Math.min(1-n,1-r,1-o);if(h===1)return new C(0,0,0,1,"cmyk");const a=(1-n-h)/(1-h),l=(1-r-h)/(1-h),c=(1-o-h)/(1-h);return new C(a,l,c,h,"cmyk")}hsl(){const{_a:t,_b:s,_c:i}=this.rgb(),[n,r,o]=[t,s,i].map(b=>b/255),h=Math.max(n,r,o),a=Math.min(n,r,o),l=(h+a)/2,c=h===a,u=h-a,f=c?0:l>.5?u/(2-h-a):u/(h+a),m=c?0:h===n?((r-o)/u+(r<o?6:0))/6:h===r?((o-n)/u+2)/6:h===o?((n-r)/u+4)/6:0;return new C(360*m,100*f,100*l,"hsl")}init(t=0,s=0,i=0,n=0,r="rgb"){if(t=t||0,this.space)for(const u in this.space)delete this[this.space[u]];if(typeof t=="number")r=typeof n=="string"?n:r,n=typeof n=="string"?0:n,Object.assign(this,{_a:t,_b:s,_c:i,_d:n,space:r});else if(t instanceof Array)this.space=s||(typeof t[3]=="string"?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){const u=er(t,s);Object.assign(this,u)}else if(typeof t=="string")if(Ds.test(t)){const u=t.replace(Ln,""),[f,m,N]=Mn.exec(u).slice(1,4).map(b=>parseInt(b));Object.assign(this,{_a:f,_b:m,_c:N,_d:0,space:"rgb"})}else if(Es.test(t)){const u=b=>parseInt(b,16),[,f,m,N]=Gn.exec(Jn(t)).map(u);Object.assign(this,{_a:f,_b:m,_c:N,_d:0,space:"rgb"})}else throw Error("Unsupported string format, can't construct Color");const{_a:o,_b:h,_c:a,_d:l}=this,c=this.space==="rgb"?{r:o,g:h,b:a}:this.space==="xyz"?{x:o,y:h,z:a}:this.space==="hsl"?{h:o,s:h,l:a}:this.space==="lab"?{l:o,a:h,b:a}:this.space==="lch"?{l:o,c:h,h:a}:this.space==="cmyk"?{c:o,m:h,y:a,k:l}:{};Object.assign(this,c)}lab(){const{x:t,y:s,z:i}=this.xyz(),n=116*s-16,r=500*(t-s),o=200*(s-i);return new C(n,r,o,"lab")}lch(){const{l:t,a:s,b:i}=this.lab(),n=Math.sqrt(s**2+i**2);let r=180*Math.atan2(i,s)/Math.PI;return r<0&&(r*=-1,r=360-r),new C(t,n,r,"lch")}rgb(){if(this.space==="rgb")return this;if(sr(this.space)){let{x:t,y:s,z:i}=this;if(this.space==="lab"||this.space==="lch"){let{l:m,a:N,b}=this;if(this.space==="lch"){const{c:Q,h:et}=this,ct=Math.PI/180;N=Q*Math.cos(ct*et),b=Q*Math.sin(ct*et)}const d=(m+16)/116,k=N/500+d,B=d-b/200,q=16/116,X=.008856,V=7.787;t=.95047*(k**3>X?k**3:(k-q)/V),s=1*(d**3>X?d**3:(d-q)/V),i=1.08883*(B**3>X?B**3:(B-q)/V)}const n=t*3.2406+s*-1.5372+i*-.4986,r=t*-.9689+s*1.8758+i*.0415,o=t*.0557+s*-.204+i*1.057,h=Math.pow,a=.0031308,l=n>a?1.055*h(n,1/2.4)-.055:12.92*n,c=r>a?1.055*h(r,1/2.4)-.055:12.92*r,u=o>a?1.055*h(o,1/2.4)-.055:12.92*o;return new C(255*l,255*c,255*u)}else if(this.space==="hsl"){let{h:t,s,l:i}=this;if(t/=360,s/=100,i/=100,s===0)return i*=255,new C(i,i,i);const n=i<.5?i*(1+s):i+s-i*s,r=2*i-n,o=255*Fe(r,n,t+1/3),h=255*Fe(r,n,t),a=255*Fe(r,n,t-1/3);return new C(o,h,a)}else if(this.space==="cmyk"){const{c:t,m:s,y:i,k:n}=this,r=255*(1-Math.min(1,t*(1-n)+n)),o=255*(1-Math.min(1,s*(1-n)+n)),h=255*(1-Math.min(1,i*(1-n)+n));return new C(r,o,h)}else return this}toArray(){const{_a:t,_b:s,_c:i,_d:n,space:r}=this;return[t,s,i,n,r]}toHex(){const[t,s,i]=this._clamped().map(tr);return`#${t}${s}${i}`}toRgb(){const[t,s,i]=this._clamped();return`rgb(${t},${s},${i})`}toString(){return this.toHex()}xyz(){const{_a:t,_b:s,_c:i}=this.rgb(),[n,r,o]=[t,s,i].map(k=>k/255),h=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,a=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,l=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,c=(h*.4124+a*.3576+l*.1805)/.95047,u=(h*.2126+a*.7152+l*.0722)/1,f=(h*.0193+a*.1192+l*.9505)/1.08883,m=c>.008856?Math.pow(c,1/3):7.787*c+16/116,N=u>.008856?Math.pow(u,1/3):7.787*u+16/116,b=f>.008856?Math.pow(f,1/3):7.787*f+16/116;return new C(m,N,b,"xyz")}_clamped(){const{_a:t,_b:s,_c:i}=this.rgb(),{max:n,min:r,round:o}=Math,h=a=>n(0,r(o(a),255));return[t,s,i].map(h)}}class L{constructor(...t){this.init(...t)}clone(){return new L(this)}init(t,s){const i={x:0,y:0},n=Array.isArray(t)?{x:t[0],y:t[1]}:typeof t=="object"?{x:t.x,y:t.y}:{x:t,y:s};return this.x=n.x==null?i.x:n.x,this.y=n.y==null?i.y:n.y,this}toArray(){return[this.x,this.y]}transform(t){return this.clone().transformO(t)}transformO(t){g.isMatrixLike(t)||(t=new g(t));const{x:s,y:i}=this;return this.x=t.a*s+t.c*i+t.e,this.y=t.b*s+t.d*i+t.f,this}}function ir(e,t){return new L(e,t).transform(this.screenCTM().inverse())}function Lt(e,t,s){return Math.abs(t-e)<(s||1e-6)}class g{constructor(...t){this.init(...t)}static formatTransforms(t){const s=t.flip==="both"||t.flip===!0,i=t.flip&&(s||t.flip==="x")?-1:1,n=t.flip&&(s||t.flip==="y")?-1:1,r=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,o=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,h=t.scale&&t.scale.length?t.scale[0]*i:isFinite(t.scale)?t.scale*i:isFinite(t.scaleX)?t.scaleX*i:i,a=t.scale&&t.scale.length?t.scale[1]*n:isFinite(t.scale)?t.scale*n:isFinite(t.scaleY)?t.scaleY*n:n,l=t.shear||0,c=t.rotate||t.theta||0,u=new L(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),f=u.x,m=u.y,N=new L(t.position||t.px||t.positionX||NaN,t.py||t.positionY||NaN),b=N.x,d=N.y,k=new L(t.translate||t.tx||t.translateX,t.ty||t.translateY),B=k.x,q=k.y,X=new L(t.relative||t.rx||t.relativeX,t.ry||t.relativeY),V=X.x,Q=X.y;return{scaleX:h,scaleY:a,skewX:r,skewY:o,shear:l,theta:c,rx:V,ry:Q,tx:B,ty:q,ox:f,oy:m,px:b,py:d}}static fromArray(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}static isMatrixLike(t){return t.a!=null||t.b!=null||t.c!=null||t.d!=null||t.e!=null||t.f!=null}static matrixMultiply(t,s,i){const n=t.a*s.a+t.c*s.b,r=t.b*s.a+t.d*s.b,o=t.a*s.c+t.c*s.d,h=t.b*s.c+t.d*s.d,a=t.e+t.a*s.e+t.c*s.f,l=t.f+t.b*s.e+t.d*s.f;return i.a=n,i.b=r,i.c=o,i.d=h,i.e=a,i.f=l,i}around(t,s,i){return this.clone().aroundO(t,s,i)}aroundO(t,s,i){const n=t||0,r=s||0;return this.translateO(-n,-r).lmultiplyO(i).translateO(n,r)}clone(){return new g(this)}decompose(t=0,s=0){const i=this.a,n=this.b,r=this.c,o=this.d,h=this.e,a=this.f,l=i*o-n*r,c=l>0?1:-1,u=c*Math.sqrt(i*i+n*n),f=Math.atan2(c*n,c*i),m=180/Math.PI*f,N=Math.cos(f),b=Math.sin(f),d=(i*r+n*o)/l,k=r*u/(d*i-n)||o*u/(d*n+i),B=h-t+t*N*u+s*(d*N*u-b*k),q=a-s+t*b*u+s*(d*b*u+N*k);return{scaleX:u,scaleY:k,shear:d,rotate:m,translateX:B,translateY:q,originX:t,originY:s,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(t){if(t===this)return!0;const s=new g(t);return Lt(this.a,s.a)&&Lt(this.b,s.b)&&Lt(this.c,s.c)&&Lt(this.d,s.d)&&Lt(this.e,s.e)&&Lt(this.f,s.f)}flip(t,s){return this.clone().flipO(t,s)}flipO(t,s){return t==="x"?this.scaleO(-1,1,s,0):t==="y"?this.scaleO(1,-1,0,s):this.scaleO(-1,-1,t,s||t)}init(t){const s=g.fromArray([1,0,0,1,0,0]);return t=t instanceof J?t.matrixify():typeof t=="string"?g.fromArray(t.split(yt).map(parseFloat)):Array.isArray(t)?g.fromArray(t):typeof t=="object"&&g.isMatrixLike(t)?t:typeof t=="object"?new g().transform(t):arguments.length===6?g.fromArray([].slice.call(arguments)):s,this.a=t.a!=null?t.a:s.a,this.b=t.b!=null?t.b:s.b,this.c=t.c!=null?t.c:s.c,this.d=t.d!=null?t.d:s.d,this.e=t.e!=null?t.e:s.e,this.f=t.f!=null?t.f:s.f,this}inverse(){return this.clone().inverseO()}inverseO(){const t=this.a,s=this.b,i=this.c,n=this.d,r=this.e,o=this.f,h=t*n-s*i;if(!h)throw new Error("Cannot invert "+this);const a=n/h,l=-s/h,c=-i/h,u=t/h,f=-(a*r+c*o),m=-(l*r+u*o);return this.a=a,this.b=l,this.c=c,this.d=u,this.e=f,this.f=m,this}lmultiply(t){return this.clone().lmultiplyO(t)}lmultiplyO(t){const s=this,i=t instanceof g?t:new g(t);return g.matrixMultiply(i,s,this)}multiply(t){return this.clone().multiplyO(t)}multiplyO(t){const s=this,i=t instanceof g?t:new g(t);return g.matrixMultiply(s,i,this)}rotate(t,s,i){return this.clone().rotateO(t,s,i)}rotateO(t,s=0,i=0){t=qe(t);const n=Math.cos(t),r=Math.sin(t),{a:o,b:h,c:a,d:l,e:c,f:u}=this;return this.a=o*n-h*r,this.b=h*n+o*r,this.c=a*n-l*r,this.d=l*n+a*r,this.e=c*n-u*r+i*r-s*n+s,this.f=u*n+c*r-s*r-i*n+i,this}scale(t,s,i,n){return this.clone().scaleO(...arguments)}scaleO(t,s=t,i=0,n=0){arguments.length===3&&(n=i,i=s,s=t);const{a:r,b:o,c:h,d:a,e:l,f:c}=this;return this.a=r*t,this.b=o*s,this.c=h*t,this.d=a*s,this.e=l*t-i*t+i,this.f=c*s-n*s+n,this}shear(t,s,i){return this.clone().shearO(t,s,i)}shearO(t,s=0,i=0){const{a:n,b:r,c:o,d:h,e:a,f:l}=this;return this.a=n+r*t,this.c=o+h*t,this.e=a+l*t-i*t,this}skew(t,s,i,n){return this.clone().skewO(...arguments)}skewO(t,s=t,i=0,n=0){arguments.length===3&&(n=i,i=s,s=t),t=qe(t),s=qe(s);const r=Math.tan(t),o=Math.tan(s),{a:h,b:a,c:l,d:c,e:u,f}=this;return this.a=h+a*r,this.b=a+h*o,this.c=l+c*r,this.d=c+l*o,this.e=u+f*r-n*r,this.f=f+u*o-i*o,this}skewX(t,s,i){return this.skew(t,0,s,i)}skewY(t,s,i){return this.skew(0,t,s,i)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(t){if(g.isMatrixLike(t))return new g(t).multiplyO(this);const s=g.formatTransforms(t),i=this,{x:n,y:r}=new L(s.ox,s.oy).transform(i),o=new g().translateO(s.rx,s.ry).lmultiplyO(i).translateO(-n,-r).scaleO(s.scaleX,s.scaleY).skewO(s.skewX,s.skewY).shearO(s.shear).rotateO(s.theta).translateO(n,r);if(isFinite(s.px)||isFinite(s.py)){const h=new L(n,r).transform(o),a=isFinite(s.px)?s.px-h.x:0,l=isFinite(s.py)?s.py-h.y:0;o.translateO(a,l)}return o.translateO(s.tx,s.ty),o}translate(t,s){return this.clone().translateO(t,s)}translateO(t,s){return this.e+=t||0,this.f+=s||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function nr(){return new g(this.node.getCTM())}function rr(){if(typeof this.isRoot=="function"&&!this.isRoot()){const e=this.rect(1,1),t=e.node.getScreenCTM();return e.remove(),new g(t)}return new g(this.node.getScreenCTM())}T(g,"Matrix");function St(){if(!St.nodes){const e=Y().size(2,0);e.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),e.attr("focusable","false"),e.attr("aria-hidden","true");const t=e.path().node;St.nodes={svg:e,path:t}}if(!St.nodes.svg.node.parentNode){const e=O.document.body||O.document.documentElement;St.nodes.svg.addTo(e)}return St.nodes}function ei(e){return!e.width&&!e.height&&!e.x&&!e.y}function or(e){return e===O.document||(O.document.documentElement.contains||function(t){for(;t.parentNode;)t=t.parentNode;return t===O.document}).call(O.document.documentElement,e)}class F{constructor(...t){this.init(...t)}addOffset(){return this.x+=O.window.pageXOffset,this.y+=O.window.pageYOffset,new F(this)}init(t){const s=[0,0,0,0];return t=typeof t=="string"?t.split(yt).map(parseFloat):Array.isArray(t)?t:typeof t=="object"?[t.left!=null?t.left:t.x,t.top!=null?t.top:t.y,t.width,t.height]:arguments.length===4?[].slice.call(arguments):s,this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return ei(this)}merge(t){const s=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width)-s,r=Math.max(this.y+this.height,t.y+t.height)-i;return new F(s,i,n,r)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(t){t instanceof g||(t=new g(t));let s=1/0,i=-1/0,n=1/0,r=-1/0;return[new L(this.x,this.y),new L(this.x2,this.y),new L(this.x,this.y2),new L(this.x2,this.y2)].forEach(function(h){h=h.transform(t),s=Math.min(s,h.x),i=Math.max(i,h.x),n=Math.min(n,h.y),r=Math.max(r,h.y)}),new F(s,n,i-s,r-n)}}function si(e,t,s){let i;try{if(i=t(e.node),ei(i)&&!or(e.node))throw new Error("Element not in the dom")}catch{i=s(e)}return i}function hr(){const s=si(this,n=>n.getBBox(),n=>{try{const r=n.clone().addTo(St().svg).show(),o=r.node.getBBox();return r.remove(),o}catch(r){throw new Error(`Getting bbox of element "${n.node.nodeName}" is not possible: ${r.toString()}`)}});return new F(s)}function ar(e){const i=si(this,r=>r.getBoundingClientRect(),r=>{throw new Error(`Getting rbox of element "${r.node.nodeName}" is not possible`)}),n=new F(i);return e?n.transform(e.screenCTM().inverseO()):n.addOffset()}function lr(e,t){const s=this.bbox();return e>s.x&&t>s.y&&e<s.x+s.width&&t<s.y+s.height}v({viewbox:{viewbox(e,t,s,i){return e==null?new F(this.attr("viewBox")):this.attr("viewBox",new F(e,t,s,i))},zoom(e,t){let{width:s,height:i}=this.attr(["width","height"]);if((!s&&!i||typeof s=="string"||typeof i=="string")&&(s=this.node.clientWidth,i=this.node.clientHeight),!s||!i)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const n=this.viewbox(),r=s/n.width,o=i/n.height,h=Math.min(r,o);if(e==null)return h;let a=h/e;a===1/0&&(a=Number.MAX_SAFE_INTEGER/100),t=t||new L(s/2/r+n.x,i/2/o+n.y);const l=new F(n).transform(new g({scale:a,origin:t}));return this.viewbox(l)}}});T(F,"Box");class Dt extends Array{constructor(t=[],...s){if(super(t,...s),typeof t=="number")return this;this.length=0,this.push(...t)}}w([Dt],{each(e,...t){return typeof e=="function"?this.map((s,i,n)=>e.call(s,s,i,n)):this.map(s=>s[e](...t))},toArray(){return Array.prototype.concat.apply([],this)}});const ur=["toArray","constructor","each"];Dt.extend=function(e){e=e.reduce((t,s)=>(ur.includes(s)||s[0]==="_"||(t[s]=function(...i){return this.each(s,...i)}),t),{}),w([Dt],e)};function At(e,t){return new Dt(ss((t||O.document).querySelectorAll(e),function(s){return rt(s)}))}function cr(e){return At(e,this.node)}function fr(e){return rt(this.node.querySelector(e))}let dr=0;const ii={};function ni(e){let t=e.getEventHolder();return t===O.window&&(t=ii),t.events||(t.events={}),t.events}function hs(e){return e.getEventTarget()}function pr(e){let t=e.getEventHolder();t===O.window&&(t=ii),t.events&&(t.events={})}function Ot(e,t,s,i,n){const r=s.bind(i||e),o=Y(e),h=ni(o),a=hs(o);t=Array.isArray(t)?t:t.split(yt),s._svgjsListenerId||(s._svgjsListenerId=++dr),t.forEach(function(l){const c=l.split(".")[0],u=l.split(".")[1]||"*";h[c]=h[c]||{},h[c][u]=h[c][u]||{},h[c][u][s._svgjsListenerId]=r,a.addEventListener(c,r,n||!1)})}function ut(e,t,s,i){const n=Y(e),r=ni(n),o=hs(n);typeof s=="function"&&(s=s._svgjsListenerId,!s)||(t=Array.isArray(t)?t:(t||"").split(yt),t.forEach(function(h){const a=h&&h.split(".")[0],l=h&&h.split(".")[1];let c,u;if(s)r[a]&&r[a][l||"*"]&&(o.removeEventListener(a,r[a][l||"*"][s],i||!1),delete r[a][l||"*"][s]);else if(a&&l){if(r[a]&&r[a][l]){for(u in r[a][l])ut(o,[a,l].join("."),u);delete r[a][l]}}else if(l)for(h in r)for(c in r[h])l===c&&ut(o,[h,l].join("."));else if(a){if(r[a]){for(c in r[a])ut(o,[a,c].join("."));delete r[a]}}else{for(h in r)ut(o,h);pr(n)}}))}function mr(e,t,s,i){const n=hs(e);return t instanceof O.window.Event||(t=new O.window.CustomEvent(t,{detail:s,cancelable:!0,...i})),n.dispatchEvent(t),t}class ne extends ns{addEventListener(){}dispatch(t,s,i){return mr(this,t,s,i)}dispatchEvent(t){const s=this.getEventHolder().events;if(!s)return!0;const i=s[t.type];for(const n in i)for(const r in i[n])i[n][r](t);return!t.defaultPrevented}fire(t,s,i){return this.dispatch(t,s,i),this}getEventHolder(){return this}getEventTarget(){return this}off(t,s,i){return ut(this,t,s,i),this}on(t,s,i,n){return Ot(this,t,s,i,n),this}removeEventListener(){}}T(ne,"EventTarget");function As(){}const Jt={duration:400,ease:">",delay:0},gr={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class kt extends Array{constructor(...t){super(...t),this.init(...t)}clone(){return new this.constructor(this)}init(t){return typeof t=="number"?this:(this.length=0,this.push(...this.parse(t)),this)}parse(t=[]){return t instanceof Array?t:t.trim().split(yt).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const t=[];return t.push(...this),t}}class _{constructor(...t){this.init(...t)}convert(t){return new _(this.value,t)}divide(t){return t=new _(t),new _(this/t,this.unit||t.unit)}init(t,s){return s=Array.isArray(t)?t[1]:s,t=Array.isArray(t)?t[0]:t,this.value=0,this.unit=s||"",typeof t=="number"?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:typeof t=="string"?(s=t.match(ti),s&&(this.value=parseFloat(s[1]),s[5]==="%"?this.value/=100:s[5]==="s"&&(this.value*=1e3),this.unit=s[5])):t instanceof _&&(this.value=t.valueOf(),this.unit=t.unit),this}minus(t){return t=new _(t),new _(this-t,this.unit||t.unit)}plus(t){return t=new _(t),new _(this+t,this.unit||t.unit)}times(t){return t=new _(t),new _(this*t,this.unit||t.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return(this.unit==="%"?~~(this.value*1e8)/1e6:this.unit==="s"?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const ri=[];function yr(e){ri.push(e)}function xr(e,t,s){if(e==null){e={},t=this.node.attributes;for(const i of t)e[i.nodeName]=Cs.test(i.nodeValue)?parseFloat(i.nodeValue):i.nodeValue;return e}else{if(e instanceof Array)return e.reduce((i,n)=>(i[n]=this.attr(n),i),{});if(typeof e=="object"&&e.constructor===Object)for(t in e)this.attr(t,e[t]);else if(t===null)this.node.removeAttribute(e);else{if(t==null)return t=this.node.getAttribute(e),t==null?gr[e]:Cs.test(t)?parseFloat(t):t;t=ri.reduce((i,n)=>n(e,i,this),t),typeof t=="number"?t=new _(t):C.isColor(t)?t=new C(t):t.constructor===Array&&(t=new kt(t)),e==="leading"?this.leading&&this.leading(t):typeof s=="string"?this.node.setAttributeNS(s,e,t.toString()):this.node.setAttribute(e,t.toString()),this.rebuild&&(e==="font-size"||e==="x")&&this.rebuild()}}return this}class _t extends ne{constructor(t,s){super(),this.node=t,this.type=t.nodeName,s&&t!==s&&this.attr(s)}add(t,s){return t=Y(t),t.removeNamespace&&this.node instanceof O.window.SVGElement&&t.removeNamespace(),s==null?this.node.appendChild(t.node):t.node!==this.node.childNodes[s]&&this.node.insertBefore(t.node,this.node.childNodes[s]),this}addTo(t,s){return Y(t).put(this,s)}children(){return new Dt(ss(this.node.children,function(t){return rt(t)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(t=!0){return this.writeDataToDom(),new this.constructor(Js(this.node.cloneNode(t)))}each(t,s){const i=this.children();let n,r;for(n=0,r=i.length;n<r;n++)t.apply(i[n],[n,i]),s&&i[n].each(t,s);return this}element(t,s){return this.put(new _t(te(t),s))}first(){return rt(this.node.firstChild)}get(t){return rt(this.node.childNodes[t])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(t){return this.index(t)>=0}html(t,s){return this.xml(t,s,xn)}id(t){return typeof t=="undefined"&&!this.node.id&&(this.node.id=Ks(this.type)),this.attr("id",t)}index(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}last(){return rt(this.node.lastChild)}matches(t){const s=this.node,i=s.matches||s.matchesSelector||s.msMatchesSelector||s.mozMatchesSelector||s.webkitMatchesSelector||s.oMatchesSelector||null;return i&&i.call(s,t)}parent(t){let s=this;if(!s.node.parentNode)return null;if(s=rt(s.node.parentNode),!t)return s;do if(typeof t=="string"?s.matches(t):s instanceof t)return s;while(s=rt(s.node.parentNode));return s}put(t,s){return t=Y(t),this.add(t,s),t}putIn(t,s){return Y(t).add(this,s)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(t){return this.node.removeChild(t.node),this}replace(t){return t=Y(t),this.node.parentNode&&this.node.parentNode.replaceChild(t.node,this.node),t}round(t=2,s=null){const i=10**t,n=this.attr(s);for(const r in n)typeof n[r]=="number"&&(n[r]=Math.round(n[r]*i)/i);return this.attr(n),this}svg(t,s){return this.xml(t,s,is)}toString(){return this.id()}words(t){return this.node.textContent=t,this}wrap(t){const s=this.parent();if(!s)return this.addTo(t);const i=s.index(this);return s.put(t,i).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(t,s,i){if(typeof t=="boolean"&&(i=s,s=t,t=null),t==null||typeof t=="function"){s=s==null?!0:s,this.writeDataToDom();let h=this;if(t!=null){if(h=rt(h.node.cloneNode(!0)),s){const a=t(h);if(h=a||h,a===!1)return""}h.each(function(){const a=t(this),l=a||this;a===!1?this.remove():a&&this!==l&&this.replace(l)},!0)}return s?h.node.outerHTML:h.node.innerHTML}s=s==null?!1:s;const n=te("wrapper",i),r=O.document.createDocumentFragment();n.innerHTML=t;for(let h=n.children.length;h--;)r.appendChild(n.firstElementChild);const o=this.parent();return s?this.replace(r)&&o:this.add(r)}}w(_t,{attr:xr,find:cr,findOne:fr});T(_t,"Dom");class J extends _t{constructor(t,s){super(t,s),this.dom={},this.node.instance=this,t.hasAttribute("svgjs:data")&&this.setData(JSON.parse(t.getAttribute("svgjs:data"))||{})}center(t,s){return this.cx(t).cy(s)}cx(t){return t==null?this.x()+this.width()/2:this.x(t-this.width()/2)}cy(t){return t==null?this.y()+this.height()/2:this.y(t-this.height()/2)}defs(){const t=this.root();return t&&t.defs()}dmove(t,s){return this.dx(t).dy(s)}dx(t=0){return this.x(new _(t).plus(this.x()))}dy(t=0){return this.y(new _(t).plus(this.y()))}getEventHolder(){return this}height(t){return this.attr("height",t)}move(t,s){return this.x(t).y(s)}parents(t=this.root()){const s=typeof t=="string";s||(t=Y(t));const i=new Dt;let n=this;for(;(n=n.parent())&&n.node!==O.document&&n.nodeName!=="#document-fragment"&&(i.push(n),!(!s&&n.node===t.node||s&&n.matches(t)));)if(n.node===this.root().node)return null;return i}reference(t){if(t=this.attr(t),!t)return null;const s=(t+"").match(Pn);return s?Y(s[1]):null}root(){const t=this.parent(wn(rs));return t&&t.root()}setData(t){return this.dom=t,this}size(t,s){const i=jt(this,t,s);return this.width(new _(i.width)).height(new _(i.height))}width(t){return this.attr("width",t)}writeDataToDom(){return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),super.writeDataToDom()}x(t){return this.attr("x",t)}y(t){return this.attr("y",t)}}w(J,{bbox:hr,rbox:ar,inside:lr,point:ir,ctm:nr,screenCTM:rr});T(J,"Element");const Wt={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(e,t){return t==="color"?e:e+"-"+t}};["fill","stroke"].forEach(function(e){const t={};let s;t[e]=function(i){if(typeof i=="undefined")return this.attr(e);if(typeof i=="string"||i instanceof C||C.isRgb(i)||i instanceof J)this.attr(e,i);else for(s=Wt[e].length-1;s>=0;s--)i[Wt[e][s]]!=null&&this.attr(Wt.prefix(e,Wt[e][s]),i[Wt[e][s]]);return this},v(["Element","Runner"],t)});v(["Element","Runner"],{matrix:function(e,t,s,i,n,r){return e==null?new g(this):this.attr("transform",new g(e,t,s,i,n,r))},rotate:function(e,t,s){return this.transform({rotate:e,ox:t,oy:s},!0)},skew:function(e,t,s,i){return arguments.length===1||arguments.length===3?this.transform({skew:e,ox:t,oy:s},!0):this.transform({skew:[e,t],ox:s,oy:i},!0)},shear:function(e,t,s){return this.transform({shear:e,ox:t,oy:s},!0)},scale:function(e,t,s,i){return arguments.length===1||arguments.length===3?this.transform({scale:e,ox:t,oy:s},!0):this.transform({scale:[e,t],ox:s,oy:i},!0)},translate:function(e,t){return this.transform({translate:[e,t]},!0)},relative:function(e,t){return this.transform({relative:[e,t]},!0)},flip:function(e="both",t="center"){return"xybothtrue".indexOf(e)===-1&&(t=e,e="both"),this.transform({flip:e,origin:t},!0)},opacity:function(e){return this.attr("opacity",e)}});v("radius",{radius:function(e,t=e){return(this._element||this).type==="radialGradient"?this.attr("r",new _(e)):this.rx(e).ry(t)}});v("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(e){return new L(this.node.getPointAtLength(e))}});v(["Element","Runner"],{font:function(e,t){if(typeof e=="object"){for(t in e)this.font(t,e[t]);return this}return e==="leading"?this.leading(t):e==="anchor"?this.attr("text-anchor",t):e==="size"||e==="family"||e==="weight"||e==="stretch"||e==="variant"||e==="style"?this.attr("font-"+e,t):this.attr(e,t)}});const br=["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].reduce(function(e,t){const s=function(i){return i===null?this.off(t):this.on(t,i),this};return e[t]=s,e},{});v("Element",br);function wr(){return this.attr("transform",null)}function Sr(){return(this.attr("transform")||"").split(Bn).slice(0,-1).map(function(t){const s=t.trim().split("(");return[s[0],s[1].split(yt).map(function(i){return parseFloat(i)})]}).reverse().reduce(function(t,s){return s[0]==="matrix"?t.lmultiply(g.fromArray(s[1])):t[s[0]].apply(t,s[1])},new g)}function _r(e,t){if(this===e)return this;const s=this.screenCTM(),i=e.screenCTM().inverse();return this.addTo(e,t).untransform().transform(i.multiply(s)),this}function vr(e){return this.toParent(this.root(),e)}function Nr(e,t){if(e==null||typeof e=="string"){const n=new g(this).decompose();return e==null?n:n[e]}g.isMatrixLike(e)||(e={...e,origin:$e(e,this)});const s=t===!0?this:t||!1,i=new g(s).transform(e);return this.attr("transform",i)}v("Element",{untransform:wr,matrixify:Sr,toParent:_r,toRoot:vr,transform:Nr});class $ extends J{flatten(t=this,s){return this.each(function(){if(this instanceof $)return this.flatten().ungroup()}),this}ungroup(t=this.parent(),s=t.index(this)){return s=s===-1?t.children().length:s,this.each(function(i,n){return n[n.length-i-1].toParent(t,s)}),this.remove()}}T($,"Container");class Ee extends ${constructor(t,s=t){super(M("defs",t),s)}flatten(){return this}ungroup(){return this}}T(Ee,"Defs");class tt extends J{}T(tt,"Shape");function as(e){return this.attr("rx",e)}function ls(e){return this.attr("ry",e)}function oi(e){return e==null?this.cx()-this.rx():this.cx(e+this.rx())}function hi(e){return e==null?this.cy()-this.ry():this.cy(e+this.ry())}function ai(e){return this.attr("cx",e)}function li(e){return this.attr("cy",e)}function ui(e){return e==null?this.rx()*2:this.rx(new _(e).divide(2))}function ci(e){return e==null?this.ry()*2:this.ry(new _(e).divide(2))}var Rr=Object.freeze(Object.defineProperty({__proto__:null,rx:as,ry:ls,x:oi,y:hi,cx:ai,cy:li,width:ui,height:ci},Symbol.toStringTag,{value:"Module"}));class De extends tt{constructor(t,s=t){super(M("ellipse",t),s)}size(t,s){const i=jt(this,t,s);return this.rx(new _(i.width).divide(2)).ry(new _(i.height).divide(2))}}w(De,Rr);v("Container",{ellipse:G(function(e=0,t=e){return this.put(new De).size(e,t).move(0,0)})});T(De,"Ellipse");class fi extends _t{constructor(t=O.document.createDocumentFragment()){super(t)}xml(t,s,i){if(typeof t=="boolean"&&(i=s,s=t,t=null),t==null||typeof t=="function"){const n=new _t(te("wrapper",i));return n.add(this.node.cloneNode(!0)),n.xml(!1,i)}return super.xml(t,!1,i)}}T(fi,"Fragment");function di(e,t){return(this._element||this).type==="radialGradient"?this.attr({fx:new _(e),fy:new _(t)}):this.attr({x1:new _(e),y1:new _(t)})}function pi(e,t){return(this._element||this).type==="radialGradient"?this.attr({cx:new _(e),cy:new _(t)}):this.attr({x2:new _(e),y2:new _(t)})}var Ir=Object.freeze(Object.defineProperty({__proto__:null,from:di,to:pi},Symbol.toStringTag,{value:"Module"}));class re extends ${constructor(t,s){super(M(t+"Gradient",typeof t=="string"?null:t),s)}attr(t,s,i){return t==="transform"&&(t="gradientTransform"),super.attr(t,s,i)}bbox(){return new F}targets(){return At('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}url(){return'url("#'+this.id()+'")'}}w(re,Ir);v({Container:{gradient(...e){return this.defs().gradient(...e)}},Defs:{gradient:G(function(e,t){return this.put(new re(e)).update(t)})}});T(re,"Gradient");class ee extends ${constructor(t,s=t){super(M("pattern",t),s)}attr(t,s,i){return t==="transform"&&(t="patternTransform"),super.attr(t,s,i)}bbox(){return new F}targets(){return At('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}url(){return'url("#'+this.id()+'")'}}v({Container:{pattern(...e){return this.defs().pattern(...e)}},Defs:{pattern:G(function(e,t,s){return this.put(new ee).update(s).attr({x:0,y:0,width:e,height:t,patternUnits:"userSpaceOnUse"})})}});T(ee,"Pattern");class ke extends tt{constructor(t,s=t){super(M("image",t),s)}load(t,s){if(!t)return this;const i=new O.window.Image;return Ot(i,"load",function(n){const r=this.parent(ee);this.width()===0&&this.height()===0&&this.size(i.width,i.height),r instanceof ee&&r.width()===0&&r.height()===0&&r.size(this.width(),this.height()),typeof s=="function"&&s.call(this,n)},this),Ot(i,"load error",function(){ut(i)}),this.attr("href",i.src=t,Yt)}}yr(function(e,t,s){return(e==="fill"||e==="stroke")&&qn.test(t)&&(t=s.root().defs().image(t)),t instanceof ke&&(t=s.root().defs().pattern(0,0,i=>{i.add(t)})),t});v({Container:{image:G(function(e,t){return this.put(new ke).size(0,0).load(e,t)})}});T(ke,"Image");class vt extends kt{bbox(){let t=-1/0,s=-1/0,i=1/0,n=1/0;return this.forEach(function(r){t=Math.max(r[0],t),s=Math.max(r[1],s),i=Math.min(r[0],i),n=Math.min(r[1],n)}),new F(i,n,t-i,s-n)}move(t,s){const i=this.bbox();if(t-=i.x,s-=i.y,!isNaN(t)&&!isNaN(s))for(let n=this.length-1;n>=0;n--)this[n]=[this[n][0]+t,this[n][1]+s];return this}parse(t=[0,0]){const s=[];t instanceof Array?t=Array.prototype.concat.apply([],t):t=t.trim().split(yt).map(parseFloat),t.length%2!==0&&t.pop();for(let i=0,n=t.length;i<n;i=i+2)s.push([t[i],t[i+1]]);return s}size(t,s){let i;const n=this.bbox();for(i=this.length-1;i>=0;i--)n.width&&(this[i][0]=(this[i][0]-n.x)*t/n.width+n.x),n.height&&(this[i][1]=(this[i][1]-n.y)*s/n.height+n.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const t=[];for(let s=0,i=this.length;s<i;s++)t.push(this[s].join(","));return t.join(" ")}transform(t){return this.clone().transformO(t)}transformO(t){g.isMatrixLike(t)||(t=new g(t));for(let s=this.length;s--;){const[i,n]=this[s];this[s][0]=t.a*i+t.c*n+t.e,this[s][1]=t.b*i+t.d*n+t.f}return this}}const Tr=vt;function Or(e){return e==null?this.bbox().x:this.move(e,this.bbox().y)}function Er(e){return e==null?this.bbox().y:this.move(this.bbox().x,e)}function Dr(e){const t=this.bbox();return e==null?t.width:this.size(e,t.height)}function kr(e){const t=this.bbox();return e==null?t.height:this.size(t.width,e)}var us=Object.freeze(Object.defineProperty({__proto__:null,MorphArray:Tr,x:Or,y:Er,width:Dr,height:kr},Symbol.toStringTag,{value:"Module"}));class se extends tt{constructor(t,s=t){super(M("line",t),s)}array(){return new vt([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(t,s){return this.attr(this.array().move(t,s).toLine())}plot(t,s,i,n){return t==null?this.array():(typeof s!="undefined"?t={x1:t,y1:s,x2:i,y2:n}:t=new vt(t).toLine(),this.attr(t))}size(t,s){const i=jt(this,t,s);return this.attr(this.array().size(i.width,i.height).toLine())}}w(se,us);v({Container:{line:G(function(...e){return se.prototype.plot.apply(this.put(new se),e[0]!=null?e:[0,0,0,0])})}});T(se,"Line");class Re extends ${constructor(t,s=t){super(M("marker",t),s)}height(t){return this.attr("markerHeight",t)}orient(t){return this.attr("orient",t)}ref(t,s){return this.attr("refX",t).attr("refY",s)}toString(){return"url(#"+this.id()+")"}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}width(t){return this.attr("markerWidth",t)}}v({Container:{marker(...e){return this.defs().marker(...e)}},Defs:{marker:G(function(e,t,s){return this.put(new Re).size(e,t).ref(e/2,t/2).viewbox(0,0,e,t).attr("orient","auto").update(s)})},marker:{marker(e,t,s,i){let n=["marker"];return e!=="all"&&n.push(e),n=n.join("-"),e=arguments[1]instanceof Re?arguments[1]:this.defs().marker(t,s,i),this.attr(n,e)}}});T(Re,"Marker");function zt(e,t){return function(s){return s==null?this[e]:(this[e]=s,t&&t.call(this),this)}}const Cr={"-":function(e){return e},"<>":function(e){return-Math.cos(e*Math.PI)/2+.5},">":function(e){return Math.sin(e*Math.PI/2)},"<":function(e){return-Math.cos(e*Math.PI/2)+1},bezier:function(e,t,s,i){return function(n){return n<0?e>0?t/e*n:s>0?i/s*n:0:n>1?s<1?(1-i)/(1-s)*n+(i-s)/(1-s):e<1?(1-t)/(1-e)*n+(t-e)/(1-e):1:3*n*(1-n)**2*t+3*n**2*(1-n)*i+n**3}},steps:function(e,t="end"){t=t.split("-").reverse()[0];let s=e;return t==="none"?--s:t==="both"&&++s,(i,n=!1)=>{let r=Math.floor(i*e);const o=i*r%1===0;return(t==="start"||t==="both")&&++r,n&&o&&--r,i>=0&&r<0&&(r=0),i<=1&&r>s&&(r=s),r/s}}};class cs{done(){return!1}}class Xe extends cs{constructor(t=Jt.ease){super(),this.ease=Cr[t]||t}step(t,s,i){return typeof t!="number"?i<1?t:s:t+(s-t)*this.ease(i)}}class Ie extends cs{constructor(t){super(),this.stepper=t}done(t){return t.done}step(t,s,i,n){return this.stepper(t,s,i,n)}}function Gs(){const e=(this._duration||500)/1e3,t=this._overshoot||0,s=1e-10,i=Math.PI,n=Math.log(t/100+s),r=-n/Math.sqrt(i*i+n*n),o=3.9/(r*e);this.d=2*r*o,this.k=o*o}class Ar extends Ie{constructor(t=500,s=0){super(),this.duration(t).overshoot(s)}step(t,s,i,n){if(typeof t=="string")return t;if(n.done=i===1/0,i===1/0)return s;if(i===0)return t;i>100&&(i=16),i/=1e3;const r=n.velocity||0,o=-this.d*r-this.k*(t-s),h=t+r*i+o*i*i/2;return n.velocity=r+o*i,n.done=Math.abs(s-h)+Math.abs(r)<.002,n.done?s:h}}w(Ar,{duration:zt("_duration",Gs),overshoot:zt("_overshoot",Gs)});class Gr extends Ie{constructor(t=.1,s=.01,i=0,n=1e3){super(),this.p(t).i(s).d(i).windup(n)}step(t,s,i,n){if(typeof t=="string")return t;if(n.done=i===1/0,i===1/0)return s;if(i===0)return t;const r=s-t;let o=(n.integral||0)+r*i;const h=(r-(n.error||0))/i,a=this._windup;return a!==!1&&(o=Math.max(-a,Math.min(o,a))),n.error=r,n.integral=o,n.done=Math.abs(r)<.001,n.done?s:t+(this.P*r+this.I*o+this.D*h)}}w(Gr,{windup:zt("_windup"),p:zt("P"),i:zt("I"),d:zt("D")});const Mr={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},Ue={M:function(e,t,s){return t.x=s.x=e[0],t.y=s.y=e[1],["M",t.x,t.y]},L:function(e,t){return t.x=e[0],t.y=e[1],["L",e[0],e[1]]},H:function(e,t){return t.x=e[0],["H",e[0]]},V:function(e,t){return t.y=e[0],["V",e[0]]},C:function(e,t){return t.x=e[4],t.y=e[5],["C",e[0],e[1],e[2],e[3],e[4],e[5]]},S:function(e,t){return t.x=e[2],t.y=e[3],["S",e[0],e[1],e[2],e[3]]},Q:function(e,t){return t.x=e[2],t.y=e[3],["Q",e[0],e[1],e[2],e[3]]},T:function(e,t){return t.x=e[0],t.y=e[1],["T",e[0],e[1]]},Z:function(e,t,s){return t.x=s.x,t.y=s.y,["Z"]},A:function(e,t){return t.x=e[5],t.y=e[6],["A",e[0],e[1],e[2],e[3],e[4],e[5],e[6]]}},Ve="mlhvqtcsaz".split("");for(let e=0,t=Ve.length;e<t;++e)Ue[Ve[e]]=function(s){return function(i,n,r){if(s==="H")i[0]=i[0]+n.x;else if(s==="V")i[0]=i[0]+n.y;else if(s==="A")i[5]=i[5]+n.x,i[6]=i[6]+n.y;else for(let o=0,h=i.length;o<h;++o)i[o]=i[o]+(o%2?n.y:n.x);return Ue[s](i,n,r)}}(Ve[e].toUpperCase());function Pr(e){const t=e.segment[0];return Ue[t](e.segment.slice(1),e.p,e.p0)}function Qe(e){return e.segment.length&&e.segment.length-1===Mr[e.segment[0].toUpperCase()]}function Br(e,t){e.inNumber&&Rt(e,!1);const s=os.test(t);if(s)e.segment=[t];else{const i=e.lastCommand,n=i.toLowerCase(),r=i===n;e.segment=[n==="m"?r?"l":"L":i]}return e.inSegment=!0,e.lastCommand=e.segment[0],s}function Rt(e,t){if(!e.inNumber)throw new Error("Parser Error");e.number&&e.segment.push(parseFloat(e.number)),e.inNumber=t,e.number="",e.pointSeen=!1,e.hasExponent=!1,Qe(e)&&Ze(e)}function Ze(e){e.inSegment=!1,e.absolute&&(e.segment=Pr(e)),e.segments.push(e.segment)}function Lr(e){if(!e.segment.length)return!1;const t=e.segment[0].toUpperCase()==="A",s=e.segment.length;return t&&(s===4||s===5)}function qr(e){return e.lastToken.toUpperCase()==="E"}function zr(e,t=!0){let s=0,i="";const n={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:t,p0:new L,p:new L};for(;n.lastToken=i,i=e.charAt(s++);)if(!(!n.inSegment&&Br(n,i))){if(i==="."){if(n.pointSeen||n.hasExponent){Rt(n,!1),--s;continue}n.inNumber=!0,n.pointSeen=!0,n.number+=i;continue}if(!isNaN(parseInt(i))){if(n.number==="0"||Lr(n)){n.inNumber=!0,n.number=i,Rt(n,!0);continue}n.inNumber=!0,n.number+=i;continue}if(i===" "||i===","){n.inNumber&&Rt(n,!1);continue}if(i==="-"){if(n.inNumber&&!qr(n)){Rt(n,!1),--s;continue}n.number+=i,n.inNumber=!0;continue}if(i.toUpperCase()==="E"){n.number+=i,n.hasExponent=!0;continue}if(os.test(i)){if(n.inNumber)Rt(n,!1);else if(Qe(n))Ze(n);else throw new Error("parser Error");--s}}return n.inNumber&&Rt(n,!1),n.inSegment&&Qe(n)&&Ze(n),n.segments}function Fr(e){let t="";for(let s=0,i=e.length;s<i;s++)t+=e[s][0],e[s][1]!=null&&(t+=e[s][1],e[s][2]!=null&&(t+=" ",t+=e[s][2],e[s][3]!=null&&(t+=" ",t+=e[s][3],t+=" ",t+=e[s][4],e[s][5]!=null&&(t+=" ",t+=e[s][5],t+=" ",t+=e[s][6],e[s][7]!=null&&(t+=" ",t+=e[s][7])))));return t+" "}class Ct extends kt{bbox(){return St().path.setAttribute("d",this.toString()),new F(St.nodes.path.getBBox())}move(t,s){const i=this.bbox();if(t-=i.x,s-=i.y,!isNaN(t)&&!isNaN(s))for(let n,r=this.length-1;r>=0;r--)n=this[r][0],n==="M"||n==="L"||n==="T"?(this[r][1]+=t,this[r][2]+=s):n==="H"?this[r][1]+=t:n==="V"?this[r][1]+=s:n==="C"||n==="S"||n==="Q"?(this[r][1]+=t,this[r][2]+=s,this[r][3]+=t,this[r][4]+=s,n==="C"&&(this[r][5]+=t,this[r][6]+=s)):n==="A"&&(this[r][6]+=t,this[r][7]+=s);return this}parse(t="M0 0"){return Array.isArray(t)&&(t=Array.prototype.concat.apply([],t).toString()),zr(t)}size(t,s){const i=this.bbox();let n,r;for(i.width=i.width===0?1:i.width,i.height=i.height===0?1:i.height,n=this.length-1;n>=0;n--)r=this[n][0],r==="M"||r==="L"||r==="T"?(this[n][1]=(this[n][1]-i.x)*t/i.width+i.x,this[n][2]=(this[n][2]-i.y)*s/i.height+i.y):r==="H"?this[n][1]=(this[n][1]-i.x)*t/i.width+i.x:r==="V"?this[n][1]=(this[n][1]-i.y)*s/i.height+i.y:r==="C"||r==="S"||r==="Q"?(this[n][1]=(this[n][1]-i.x)*t/i.width+i.x,this[n][2]=(this[n][2]-i.y)*s/i.height+i.y,this[n][3]=(this[n][3]-i.x)*t/i.width+i.x,this[n][4]=(this[n][4]-i.y)*s/i.height+i.y,r==="C"&&(this[n][5]=(this[n][5]-i.x)*t/i.width+i.x,this[n][6]=(this[n][6]-i.y)*s/i.height+i.y)):r==="A"&&(this[n][1]=this[n][1]*t/i.width,this[n][2]=this[n][2]*s/i.height,this[n][6]=(this[n][6]-i.x)*t/i.width+i.x,this[n][7]=(this[n][7]-i.y)*s/i.height+i.y);return this}toString(){return Fr(this)}}const mi=e=>{const t=typeof e;return t==="number"?_:t==="string"?C.isColor(e)?C:yt.test(e)?os.test(e)?Ct:kt:ti.test(e)?_:We:fs.indexOf(e.constructor)>-1?e.constructor:Array.isArray(e)?kt:t==="object"?ie:We};class It{constructor(t){this._stepper=t||new Xe("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(t){return this._morphObj.morph(this._from,this._to,t,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(s,i){return s&&i},!0)}from(t){return t==null?this._from:(this._from=this._set(t),this)}stepper(t){return t==null?this._stepper:(this._stepper=t,this)}to(t){return t==null?this._to:(this._to=this._set(t),this)}type(t){return t==null?this._type:(this._type=t,this)}_set(t){this._type||this.type(mi(t));let s=new this._type(t);return this._type===C&&(s=this._to?s[this._to[4]]():this._from?s[this._from[4]]():s),this._type===ie&&(s=this._to?s.align(this._to):this._from?s.align(this._from):s),s=s.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(s.length)).map(Object).map(function(i){return i.done=!0,i}),s}}class We{constructor(...t){this.init(...t)}init(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}toArray(){return[this.value]}valueOf(){return this.value}}class oe{constructor(...t){this.init(...t)}init(t){return Array.isArray(t)&&(t={scaleX:t[0],scaleY:t[1],shear:t[2],rotate:t[3],translateX:t[4],translateY:t[5],originX:t[6],originY:t[7]}),Object.assign(this,oe.defaults,t),this}toArray(){const t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}}oe.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const Vr=(e,t)=>e[0]<t[0]?-1:e[0]>t[0]?1:0;class ie{constructor(...t){this.init(...t)}align(t){const s=this.values;for(let i=0,n=s.length;i<n;++i){if(s[i+1]===t[i+1]){if(s[i+1]===C&&t[i+7]!==s[i+7]){const h=t[i+7],a=new C(this.values.splice(i+3,5))[h]().toArray();this.values.splice(i+3,0,...a)}i+=s[i+2]+2;continue}if(!t[i+1])return this;const r=new t[i+1]().toArray(),o=s[i+2]+3;s.splice(i,o,t[i],t[i+1],t[i+2],...r),i+=s[i+2]+2}return this}init(t){if(this.values=[],Array.isArray(t)){this.values=t.slice();return}t=t||{};const s=[];for(const i in t){const n=mi(t[i]),r=new n(t[i]).toArray();s.push([i,n,r.length,...r])}return s.sort(Vr),this.values=s.reduce((i,n)=>i.concat(n),[]),this}toArray(){return this.values}valueOf(){const t={},s=this.values;for(;s.length;){const i=s.shift(),n=s.shift(),r=s.shift(),o=s.splice(0,r);t[i]=new n(o)}return t}}const fs=[We,oe,ie];function Hr(e=[]){fs.push(...[].concat(e))}function jr(){w(fs,{to(e){return new It().type(this.constructor).from(this.toArray()).to(e)},fromArray(e){return this.init(e),this},toConsumable(){return this.toArray()},morph(e,t,s,i,n){const r=function(o,h){return i.step(o,t[h],s,n[h],n)};return this.fromArray(e.map(r))}})}class $t extends tt{constructor(t,s=t){super(M("path",t),s)}array(){return this._array||(this._array=new Ct(this.attr("d")))}clear(){return delete this._array,this}height(t){return t==null?this.bbox().height:this.size(this.bbox().width,t)}move(t,s){return this.attr("d",this.array().move(t,s))}plot(t){return t==null?this.array():this.clear().attr("d",typeof t=="string"?t:this._array=new Ct(t))}size(t,s){const i=jt(this,t,s);return this.attr("d",this.array().size(i.width,i.height))}width(t){return t==null?this.bbox().width:this.size(t,this.bbox().height)}x(t){return t==null?this.bbox().x:this.move(t,this.bbox().y)}y(t){return t==null?this.bbox().y:this.move(this.bbox().x,t)}}$t.prototype.MorphArray=Ct;v({Container:{path:G(function(e){return this.put(new $t).plot(e||new Ct)})}});T($t,"Path");function Yr(){return this._array||(this._array=new vt(this.attr("points")))}function $r(){return delete this._array,this}function Xr(e,t){return this.attr("points",this.array().move(e,t))}function Ur(e){return e==null?this.array():this.clear().attr("points",typeof e=="string"?e:this._array=new vt(e))}function Qr(e,t){const s=jt(this,e,t);return this.attr("points",this.array().size(s.width,s.height))}var gi=Object.freeze(Object.defineProperty({__proto__:null,array:Yr,clear:$r,move:Xr,plot:Ur,size:Qr},Symbol.toStringTag,{value:"Module"}));class he extends tt{constructor(t,s=t){super(M("polygon",t),s)}}v({Container:{polygon:G(function(e){return this.put(new he).plot(e||new vt)})}});w(he,us);w(he,gi);T(he,"Polygon");class ae extends tt{constructor(t,s=t){super(M("polyline",t),s)}}v({Container:{polyline:G(function(e){return this.put(new ae).plot(e||new vt)})}});w(ae,us);w(ae,gi);T(ae,"Polyline");class Ce extends tt{constructor(t,s=t){super(M("rect",t),s)}}w(Ce,{rx:as,ry:ls});v({Container:{rect:G(function(e,t){return this.put(new Ce).size(e,t)})}});T(Ce,"Rect");class He{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(t){const s=typeof t.next!="undefined"?t:{value:t,next:null,prev:null};return this._last?(s.prev=this._last,this._last.next=s,this._last=s):(this._last=s,this._first=s),s}remove(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}shift(){const t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}}const D={nextDraw:null,frames:new He,timeouts:new He,immediates:new He,timer:()=>O.window.performance||O.window.Date,transforms:[],frame(e){const t=D.frames.push({run:e});return D.nextDraw===null&&(D.nextDraw=O.window.requestAnimationFrame(D._draw)),t},timeout(e,t){t=t||0;const s=D.timer().now()+t,i=D.timeouts.push({run:e,time:s});return D.nextDraw===null&&(D.nextDraw=O.window.requestAnimationFrame(D._draw)),i},immediate(e){const t=D.immediates.push(e);return D.nextDraw===null&&(D.nextDraw=O.window.requestAnimationFrame(D._draw)),t},cancelFrame(e){e!=null&&D.frames.remove(e)},clearTimeout(e){e!=null&&D.timeouts.remove(e)},cancelImmediate(e){e!=null&&D.immediates.remove(e)},_draw(e){let t=null;const s=D.timeouts.last();for(;(t=D.timeouts.shift())&&(e>=t.time?t.run():D.timeouts.push(t),t!==s););let i=null;const n=D.frames.last();for(;i!==n&&(i=D.frames.shift());)i.run(e);let r=null;for(;r=D.immediates.shift();)r();D.nextDraw=D.timeouts.first()||D.frames.first()?O.window.requestAnimationFrame(D._draw):null}},Zr=function(e){const t=e.start,s=e.runner.duration(),i=t+s;return{start:t,duration:s,end:i,runner:e.runner}},Wr=function(){const e=O.window;return(e.performance||e.Date).now()};class yi extends ne{constructor(t=Wr){super(),this._timeSource=t,this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const t=this.getLastRunnerInfo(),s=t?t.runner.duration():0;return(t?t.start:this._time)+s}getEndTimeOfTimeline(){const t=this._runners.map(s=>s.start+s.runner.duration());return Math.max(0,...t)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(t){return this._runners[this._runnerIds.indexOf(t)]||null}pause(){return this._paused=!0,this._continue()}persist(t){return t==null?this._persist:(this._persist=t,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(t){const s=this.speed();if(t==null)return this.speed(-s);const i=Math.abs(s);return this.speed(t?-i:i)}schedule(t,s,i){if(t==null)return this._runners.map(Zr);let n=0;const r=this.getEndTime();if(s=s||0,i==null||i==="last"||i==="after")n=r;else if(i==="absolute"||i==="start")n=s,s=0;else if(i==="now")n=this._time;else if(i==="relative"){const a=this.getRunnerInfoById(t.id);a&&(n=a.start+s,s=0)}else if(i==="with-last"){const a=this.getLastRunnerInfo();n=a?a.start:this._time}else throw new Error('Invalid value for the "when" parameter');t.unschedule(),t.timeline(this);const o=t.persist(),h={persist:o===null?this._persist:o,start:n+s,runner:t};return this._lastRunnerId=t.id,this._runners.push(h),this._runners.sort((a,l)=>a.start-l.start),this._runnerIds=this._runners.map(a=>a.runner.id),this.updateTime()._continue(),this}seek(t){return this.time(this._time+t)}source(t){return t==null?this._timeSource:(this._timeSource=t,this)}speed(t){return t==null?this._speed:(this._speed=t,this)}stop(){return this.time(0),this.pause()}time(t){return t==null?this._time:(this._time=t,this._continue(!0))}unschedule(t){const s=this._runnerIds.indexOf(t.id);return s<0?this:(this._runners.splice(s,1),this._runnerIds.splice(s,1),t.timeline(null),this)}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(t=!1){return D.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():this._paused?this:(this._nextFrame=D.frame(this._step),this)}_stepFn(t=!1){const s=this._timeSource();let i=s-this._lastSourceTime;t&&(i=0);const n=this._speed*i+(this._time-this._lastStepTime);this._lastSourceTime=s,t||(this._time+=n,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let o=this._runners.length;o--;){const h=this._runners[o],a=h.runner;this._time-h.start<=0&&a.reset()}let r=!1;for(let o=0,h=this._runners.length;o<h;o++){const a=this._runners[o],l=a.runner;let c=n;const u=this._time-a.start;if(u<=0){r=!0;continue}else u<c&&(c=u);if(!l.active())continue;l.step(c).done?a.persist!==!0&&l.duration()-l.time()+this._time+a.persist<this._time&&(l.unschedule(),--o,--h):r=!0}return r&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}}v({Element:{timeline:function(e){return e==null?(this._timeline=this._timeline||new yi,this._timeline):(this._timeline=e,this)}}});class K extends ne{constructor(t){super(),this.id=K.id++,t=t==null?Jt.duration:t,t=typeof t=="function"?new Ie(t):t,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration=typeof t=="number"&&t,this._isDeclarative=t instanceof Ie,this._stepper=this._isDeclarative?t:new Xe,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new g,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=this._isDeclarative?!0:null}static sanitise(t,s,i){let n=1,r=!1,o=0;return t=t||Jt.duration,s=s||Jt.delay,i=i||"last",typeof t=="object"&&!(t instanceof cs)&&(s=t.delay||s,i=t.when||i,r=t.swing||r,n=t.times||n,o=t.wait||o,t=t.duration||Jt.duration),{duration:t,delay:s,swing:r,times:n,wait:o,when:i}}active(t){return t==null?this.enabled:(this.enabled=t,this)}addTransform(t,s){return this.transforms.lmultiplyO(t),this}after(t){return this.on("finished",t)}animate(t,s,i){const n=K.sanitise(t,s,i),r=new K(n.duration);return this._timeline&&r.timeline(this._timeline),this._element&&r.element(this._element),r.loop(n).schedule(n.delay,n.when)}clearTransform(){return this.transforms=new g,this}clearTransformsFromQueue(){(!this.done||!this._timeline||!this._timeline._runnerIds.includes(this.id))&&(this._queue=this._queue.filter(t=>!t.isTransform))}delay(t){return this.animate(0,t)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(t){return this.queue(null,t)}ease(t){return this._stepper=new Xe(t),this}element(t){return t==null?this._element:(this._element=t,t._prepareRunner(),this)}finish(){return this.step(1/0)}loop(t,s,i){return typeof t=="object"&&(s=t.swing,i=t.wait,t=t.times),this._times=t||1/0,this._swing=s||!1,this._wait=i||0,this._times===!0&&(this._times=1/0),this}loops(t){const s=this._duration+this._wait;if(t==null){const o=Math.floor(this._time/s),a=(this._time-o*s)/this._duration;return Math.min(o+a,this._times)}const i=Math.floor(t),n=t%1,r=s*i+this._duration*n;return this.time(r)}persist(t){return t==null?this._persist:(this._persist=t,this)}position(t){const s=this._time,i=this._duration,n=this._wait,r=this._times,o=this._swing,h=this._reverse;let a;if(t==null){const f=function(N){const b=o*Math.floor(N%(2*(n+i))/(n+i)),d=b&&!h||!b&&h,k=Math.pow(-1,d)*(N%(n+i))/i+d;return Math.max(Math.min(k,1),0)},m=r*(n+i)-n;return a=s<=0?Math.round(f(1e-5)):s<m?f(s):Math.round(f(m-1e-5)),a}const l=Math.floor(this.loops()),c=o&&l%2===0;return a=l+(c&&!h||h&&c?t:1-t),this.loops(a)}progress(t){return t==null?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}queue(t,s,i,n){return this._queue.push({initialiser:t||As,runner:s||As,retarget:i,isTransform:n,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted?this:(this.time(0),this._reseted=!0,this)}reverse(t){return this._reverse=t==null?!this._reverse:t,this}schedule(t,s,i){if(t instanceof yi||(i=s,s=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,s,i),this}step(t){if(!this.enabled)return this;t=t==null?16:t,this._time+=t;const s=this.position(),i=this._lastPosition!==s&&this._time>=0;this._lastPosition=s;const n=this.duration(),r=this._lastTime<=0&&this._time>0,o=this._lastTime<n&&this._time>=n;this._lastTime=this._time,r&&this.fire("start",this);const h=this._isDeclarative;this.done=!h&&!o&&this._time>=n,this._reseted=!1;let a=!1;return(i||h)&&(this._initialise(i),this.transforms=new g,a=this._run(h?t:s),this.fire("step",this)),this.done=this.done||a&&h,o&&this.fire("finished",this),this}time(t){if(t==null)return this._time;const s=t-this._time;return this.step(s),this}timeline(t){return typeof t=="undefined"?this._timeline:(this._timeline=t,this)}unschedule(){const t=this.timeline();return t&&t.unschedule(this),this}_initialise(t){if(!(!t&&!this._isDeclarative))for(let s=0,i=this._queue.length;s<i;++s){const n=this._queue[s],r=this._isDeclarative||!n.initialised&&t;t=!n.finished,r&&t&&(n.initialiser.call(this),n.initialised=!0)}}_rememberMorpher(t,s){if(this._history[t]={morpher:s,caller:this._queue[this._queue.length-1]},this._isDeclarative){const i=this.timeline();i&&i.play()}}_run(t){let s=!0;for(let i=0,n=this._queue.length;i<n;++i){const r=this._queue[i],o=r.runner.call(this,t);r.finished=r.finished||o===!0,s=s&&r.finished}return s}_tryRetarget(t,s,i){if(this._history[t]){if(!this._history[t].caller.initialised){const r=this._queue.indexOf(this._history[t].caller);return this._queue.splice(r,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget.call(this,s,i):this._history[t].morpher.to(s),this._history[t].caller.finished=!1;const n=this.timeline();return n&&n.play(),!0}return!1}}K.id=0;class Te{constructor(t=new g,s=-1,i=!0){this.transforms=t,this.id=s,this.done=i}clearTransformsFromQueue(){}}w([K,Te],{mergeWith(e){return new Te(e.transforms.lmultiply(this.transforms),e.id)}});const xi=(e,t)=>e.lmultiplyO(t),bi=e=>e.transforms;function Kr(){const t=this._transformationRunners.runners.map(bi).reduce(xi,new g);this.transform(t),this._transformationRunners.merge(),this._transformationRunners.length()===1&&(this._frameId=null)}class Jr{constructor(){this.runners=[],this.ids=[]}add(t){if(this.runners.includes(t))return;const s=t.id+1;return this.runners.push(t),this.ids.push(s),this}clearBefore(t){const s=this.ids.indexOf(t+1)||1;return this.ids.splice(0,s,0),this.runners.splice(0,s,new Te).forEach(i=>i.clearTransformsFromQueue()),this}edit(t,s){const i=this.ids.indexOf(t+1);return this.ids.splice(i,1,t+1),this.runners.splice(i,1,s),this}getByID(t){return this.runners[this.ids.indexOf(t+1)]}length(){return this.ids.length}merge(){let t=null;for(let s=0;s<this.runners.length;++s){const i=this.runners[s];if(t&&i.done&&t.done&&(!i._timeline||!i._timeline._runnerIds.includes(i.id))&&(!t._timeline||!t._timeline._runnerIds.includes(t.id))){this.remove(i.id);const r=i.mergeWith(t);this.edit(t.id,r),t=r,--s}else t=i}return this}remove(t){const s=this.ids.indexOf(t+1);return this.ids.splice(s,1),this.runners.splice(s,1),this}}v({Element:{animate(e,t,s){const i=K.sanitise(e,t,s),n=this.timeline();return new K(i.duration).loop(i).element(this).timeline(n.play()).schedule(i.delay,i.when)},delay(e,t){return this.animate(0,e,t)},_clearTransformRunnersBefore(e){this._transformationRunners.clearBefore(e.id)},_currentTransform(e){return this._transformationRunners.runners.filter(t=>t.id<=e.id).map(bi).reduce(xi,new g)},_addRunner(e){this._transformationRunners.add(e),D.cancelImmediate(this._frameId),this._frameId=D.immediate(Kr.bind(this))},_prepareRunner(){this._frameId==null&&(this._transformationRunners=new Jr().add(new Te(new g(this))))}}});const to=(e,t)=>e.filter(s=>!t.includes(s));w(K,{attr(e,t){return this.styleAttr("attr",e,t)},css(e,t){return this.styleAttr("css",e,t)},styleAttr(e,t,s){if(typeof t=="string")return this.styleAttr(e,{[t]:s});let i=t;if(this._tryRetarget(e,i))return this;let n=new It(this._stepper).to(i),r=Object.keys(i);return this.queue(function(){n=n.from(this.element()[e](r))},function(o){return this.element()[e](n.at(o).valueOf()),n.done()},function(o){const h=Object.keys(o),a=to(h,r);if(a.length){const c=this.element()[e](a),u=new ie(n.from()).valueOf();Object.assign(u,c),n.from(u)}const l=new ie(n.to()).valueOf();Object.assign(l,o),n.to(l),r=h,i=o}),this._rememberMorpher(e,n),this},zoom(e,t){if(this._tryRetarget("zoom",e,t))return this;let s=new It(this._stepper).to(new _(e));return this.queue(function(){s=s.from(this.element().zoom())},function(i){return this.element().zoom(s.at(i),t),s.done()},function(i,n){t=n,s.to(i)}),this._rememberMorpher("zoom",s),this},transform(e,t,s){if(t=e.relative||t,this._isDeclarative&&!t&&this._tryRetarget("transform",e))return this;const i=g.isMatrixLike(e);s=e.affine!=null?e.affine:s!=null?s:!i;const n=new It(this._stepper).type(s?oe:g);let r,o,h,a,l;function c(){o=o||this.element(),r=r||$e(e,o),l=new g(t?void 0:o),o._addRunner(this),t||o._clearTransformRunnersBefore(this)}function u(m){t||this.clearTransform();const{x:N,y:b}=new L(r).transform(o._currentTransform(this));let d=new g({...e,origin:[N,b]}),k=this._isDeclarative&&h?h:l;if(s){d=d.decompose(N,b),k=k.decompose(N,b);const q=d.rotate,X=k.rotate,V=[q-360,q,q+360],Q=V.map(Gt=>Math.abs(Gt-X)),et=Math.min(...Q),ct=Q.indexOf(et);d.rotate=V[ct]}t&&(i||(d.rotate=e.rotate||0),this._isDeclarative&&a&&(k.rotate=a)),n.from(k),n.to(d);const B=n.at(m);return a=B.rotate,h=new g(B),this.addTransform(h),o._addRunner(this),n.done()}function f(m){(m.origin||"center").toString()!==(e.origin||"center").toString()&&(r=$e(m,o)),e={...m,origin:r}}return this.queue(c,u,f,!0),this._isDeclarative&&this._rememberMorpher("transform",n),this},x(e,t){return this._queueNumber("x",e)},y(e){return this._queueNumber("y",e)},dx(e=0){return this._queueNumberDelta("x",e)},dy(e=0){return this._queueNumberDelta("y",e)},dmove(e,t){return this.dx(e).dy(t)},_queueNumberDelta(e,t){if(t=new _(t),this._tryRetarget(e,t))return this;const s=new It(this._stepper).to(t);let i=null;return this.queue(function(){i=this.element()[e](),s.from(i),s.to(i+t)},function(n){return this.element()[e](s.at(n)),s.done()},function(n){s.to(i+new _(n))}),this._rememberMorpher(e,s),this},_queueObject(e,t){if(this._tryRetarget(e,t))return this;const s=new It(this._stepper).to(t);return this.queue(function(){s.from(this.element()[e]())},function(i){return this.element()[e](s.at(i)),s.done()}),this._rememberMorpher(e,s),this},_queueNumber(e,t){return this._queueObject(e,new _(t))},cx(e){return this._queueNumber("cx",e)},cy(e){return this._queueNumber("cy",e)},move(e,t){return this.x(e).y(t)},center(e,t){return this.cx(e).cy(t)},size(e,t){let s;return(!e||!t)&&(s=this._element.bbox()),e||(e=s.width/s.height*t),t||(t=s.height/s.width*e),this.width(e).height(t)},width(e){return this._queueNumber("width",e)},height(e){return this._queueNumber("height",e)},plot(e,t,s,i){if(arguments.length===4)return this.plot([e,t,s,i]);if(this._tryRetarget("plot",e))return this;const n=new It(this._stepper).type(this._element.MorphArray).to(e);return this.queue(function(){n.from(this._element.array())},function(r){return this._element.plot(n.at(r)),n.done()}),this._rememberMorpher("plot",n),this},leading(e){return this._queueNumber("leading",e)},viewbox(e,t,s,i){return this._queueObject("viewbox",new F(e,t,s,i))},update(e){return typeof e!="object"?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(e.opacity!=null&&this.attr("stop-opacity",e.opacity),e.color!=null&&this.attr("stop-color",e.color),e.offset!=null&&this.attr("offset",e.offset),this)}});w(K,{rx:as,ry:ls,from:di,to:pi});T(K,"Runner");class Ae extends ${constructor(t,s=t){super(M("svg",t),s),this.namespace()}defs(){return this.isRoot()?rt(this.node.querySelector("defs"))||this.put(new Ee):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof O.window.SVGElement)&&this.node.parentNode.nodeName!=="#document-fragment"}namespace(){return this.isRoot()?this.attr({xmlns:is,version:"1.1"}).attr("xmlns:xlink",Yt,Ne).attr("xmlns:svgjs",bn,Ne):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,Ne).attr("xmlns:svgjs",null,Ne)}root(){return this.isRoot()?this:super.root()}}v({Container:{nested:G(function(){return this.put(new Ae)})}});T(Ae,"Svg",!0);class ds extends ${constructor(t,s=t){super(M("symbol",t),s)}}v({Container:{symbol:G(function(){return this.put(new ds)})}});T(ds,"Symbol");function eo(e){return this._build===!1&&this.clear(),this.node.appendChild(O.document.createTextNode(e)),this}function so(){return this.node.getComputedTextLength()}function io(e,t=this.bbox()){return e==null?t.x:this.attr("x",this.attr("x")+e-t.x)}function no(e,t=this.bbox()){return e==null?t.y:this.attr("y",this.attr("y")+e-t.y)}function ro(e,t,s=this.bbox()){return this.x(e,s).y(t,s)}function oo(e,t=this.bbox()){return e==null?t.cx:this.attr("x",this.attr("x")+e-t.cx)}function ho(e,t=this.bbox()){return e==null?t.cy:this.attr("y",this.attr("y")+e-t.cy)}function ao(e,t,s=this.bbox()){return this.cx(e,s).cy(t,s)}function lo(e){return this.attr("x",e)}function uo(e){return this.attr("y",e)}function co(e,t){return this.ax(e).ay(t)}function fo(e){return this._build=!!e,this}var wi=Object.freeze(Object.defineProperty({__proto__:null,plain:eo,length:so,x:io,y:no,move:ro,cx:oo,cy:ho,center:ao,ax:lo,ay:uo,amove:co,build:fo},Symbol.toStringTag,{value:"Module"}));class ht extends tt{constructor(t,s=t){super(M("text",t),s),this.dom.leading=new _(1.3),this._rebuild=!0,this._build=!1}leading(t){return t==null?this.dom.leading:(this.dom.leading=new _(t),this.rebuild())}rebuild(t){if(typeof t=="boolean"&&(this._rebuild=t),this._rebuild){const s=this;let i=0;const n=this.dom.leading;this.each(function(r){const o=O.window.getComputedStyle(this.node).getPropertyValue("font-size"),h=n*new _(o);this.dom.newLined&&(this.attr("x",s.attr("x")),this.text()===`
`?i+=h:(this.attr("dy",r?h+i:0),i=0))}),this.fire("rebuild")}return this}setData(t){return this.dom=t,this.dom.leading=new _(t.leading||1.3),this}text(t){if(t===void 0){const s=this.node.childNodes;let i=0;t="";for(let n=0,r=s.length;n<r;++n){if(s[n].nodeName==="textPath"){n===0&&(i=1);continue}n!==i&&s[n].nodeType!==3&&rt(s[n]).dom.newLined===!0&&(t+=`
`),t+=s[n].textContent}return t}if(this.clear().build(!0),typeof t=="function")t.call(this,this);else{t=(t+"").split(`
`);for(let s=0,i=t.length;s<i;s++)this.newLine(t[s])}return this.build(!1).rebuild()}}w(ht,wi);v({Container:{text:G(function(e=""){return this.put(new ht).text(e)}),plain:G(function(e=""){return this.put(new ht).plain(e)})}});T(ht,"Text");class Ge extends tt{constructor(t,s=t){super(M("tspan",t),s),this._build=!1}dx(t){return this.attr("dx",t)}dy(t){return this.attr("dy",t)}newLine(){this.dom.newLined=!0;const t=this.parent();if(!(t instanceof ht))return this;const s=t.index(this),i=O.window.getComputedStyle(this.node).getPropertyValue("font-size"),n=t.dom.leading*new _(i);return this.dy(s?n:0).attr("x",t.x())}text(t){return t==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof t=="function"?(this.clear().build(!0),t.call(this,this),this.build(!1)):this.plain(t),this)}}w(Ge,wi);v({Tspan:{tspan:G(function(e=""){const t=new Ge;return this._build||this.clear(),this.put(t).text(e)})},Text:{newLine:function(e=""){return this.tspan(e).newLine()}}});T(Ge,"Tspan");class ps extends tt{constructor(t,s=t){super(M("circle",t),s)}radius(t){return this.attr("r",t)}rx(t){return this.attr("r",t)}ry(t){return this.rx(t)}size(t){return this.radius(new _(t).divide(2))}}w(ps,{x:oi,y:hi,cx:ai,cy:li,width:ui,height:ci});v({Container:{circle:G(function(e=0){return this.put(new ps).size(e).move(0,0)})}});T(ps,"Circle");class Ke extends ${constructor(t,s=t){super(M("clipPath",t),s)}remove(){return this.targets().forEach(function(t){t.unclip()}),super.remove()}targets(){return At('svg [clip-path*="'+this.id()+'"]')}}v({Container:{clip:G(function(){return this.defs().put(new Ke)})},Element:{clipper(){return this.reference("clip-path")},clipWith(e){const t=e instanceof Ke?e:this.parent().clip().add(e);return this.attr("clip-path",'url("#'+t.id()+'")')},unclip(){return this.attr("clip-path",null)}}});T(Ke,"ClipPath");class Si extends J{constructor(t,s=t){super(M("foreignObject",t),s)}}v({Container:{foreignObject:G(function(e,t){return this.put(new Si).size(e,t)})}});T(Si,"ForeignObject");function po(e,t){return this.children().forEach((s,i)=>{let n;try{n=s.bbox()}catch{return}const r=new g(s),o=r.translate(e,t).transform(r.inverse()),h=new L(n.x,n.y).transform(o);s.move(h.x,h.y)}),this}function mo(e){return this.dmove(e,0)}function go(e){return this.dmove(0,e)}function yo(e,t=this.bbox()){return e==null?t.height:this.size(t.width,e,t)}function xo(e=0,t=0,s=this.bbox()){const i=e-s.x,n=t-s.y;return this.dmove(i,n)}function bo(e,t,s=this.bbox()){const i=jt(this,e,t,s),n=i.width/s.width,r=i.height/s.height;return this.children().forEach((o,h)=>{const a=new L(s).transform(new g(o).inverse());o.scale(n,r,a.x,a.y)}),this}function wo(e,t=this.bbox()){return e==null?t.width:this.size(e,t.height,t)}function So(e,t=this.bbox()){return e==null?t.x:this.move(e,t.y,t)}function _o(e,t=this.bbox()){return e==null?t.y:this.move(t.x,e,t)}var _i=Object.freeze(Object.defineProperty({__proto__:null,dmove:po,dx:mo,dy:go,height:yo,move:xo,size:bo,width:wo,x:So,y:_o},Symbol.toStringTag,{value:"Module"}));class ms extends ${constructor(t,s=t){super(M("g",t),s)}}w(ms,_i);v({Container:{group:G(function(){return this.put(new ms)})}});T(ms,"G");class Oe extends ${constructor(t,s=t){super(M("a",t),s)}target(t){return this.attr("target",t)}to(t){return this.attr("href",t,Yt)}}w(Oe,_i);v({Container:{link:G(function(e){return this.put(new Oe).to(e)})},Element:{unlink(){const e=this.linker();if(!e)return this;const t=e.parent();if(!t)return this.remove();const s=t.index(e);return t.add(this,s),e.remove(),this},linkTo(e){let t=this.linker();return t||(t=new Oe,this.wrap(t)),typeof e=="function"?e.call(t,t):t.to(e),this},linker(){const e=this.parent();return e&&e.node.nodeName.toLowerCase()==="a"?e:null}}});T(Oe,"A");class Je extends ${constructor(t,s=t){super(M("mask",t),s)}remove(){return this.targets().forEach(function(t){t.unmask()}),super.remove()}targets(){return At('svg [mask*="'+this.id()+'"]')}}v({Container:{mask:G(function(){return this.defs().put(new Je)})},Element:{masker(){return this.reference("mask")},maskWith(e){const t=e instanceof Je?e:this.parent().mask().add(e);return this.attr("mask",'url("#'+t.id()+'")')},unmask(){return this.attr("mask",null)}}});T(Je,"Mask");class vi extends J{constructor(t,s=t){super(M("stop",t),s)}update(t){return(typeof t=="number"||t instanceof _)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),t.opacity!=null&&this.attr("stop-opacity",t.opacity),t.color!=null&&this.attr("stop-color",t.color),t.offset!=null&&this.attr("offset",new _(t.offset)),this}}v({Gradient:{stop:function(e,t,s){return this.put(new vi).update(e,t,s)}}});T(vi,"Stop");function vo(e,t){if(!e)return"";if(!t)return e;let s=e+"{";for(const i in t)s+=yn(i)+":"+t[i]+";";return s+="}",s}class ts extends J{constructor(t,s=t){super(M("style",t),s)}addText(t=""){return this.node.textContent+=t,this}font(t,s,i={}){return this.rule("@font-face",{fontFamily:t,src:s,...i})}rule(t,s){return this.addText(vo(t,s))}}v("Dom",{style(e,t){return this.put(new ts).rule(e,t)},fontface(e,t,s){return this.put(new ts).font(e,t,s)}});T(ts,"Style");class gs extends ht{constructor(t,s=t){super(M("textPath",t),s)}array(){const t=this.track();return t?t.array():null}plot(t){const s=this.track();let i=null;return s&&(i=s.plot(t)),t==null?i:this}track(){return this.reference("href")}}v({Container:{textPath:G(function(e,t){return e instanceof ht||(e=this.text(e)),e.path(t)})},Text:{path:G(function(e,t=!0){const s=new gs;e instanceof $t||(e=this.defs().path(e)),s.attr("href","#"+e,Yt);let i;if(t)for(;i=this.node.firstChild;)s.node.appendChild(i);return this.put(s)}),textPath(){return this.findOne("textPath")}},Path:{text:G(function(e){return e instanceof ht||(e=new ht().addTo(this.parent()).text(e)),e.path(this)}),targets(){return At("svg textPath").filter(e=>(e.attr("href")||"").includes(this.id()))}}});gs.prototype.MorphArray=Ct;T(gs,"TextPath");class Ni extends tt{constructor(t,s=t){super(M("use",t),s)}use(t,s){return this.attr("href",(s||"")+"#"+t,Yt)}}v({Container:{use:G(function(e,t){return this.put(new Ni).use(e,t)})}});T(Ni,"Use");const je=Y;w([Ae,ds,ke,ee,Re],U("viewbox"));w([se,ae,he,$t],U("marker"));w(ht,U("Text"));w($t,U("Path"));w(Ee,U("Defs"));w([ht,Ge],U("Tspan"));w([Ce,De,re,K],U("radius"));w(ne,U("EventTarget"));w(_t,U("Dom"));w(J,U("Element"));w(tt,U("Shape"));w([$,fi],U("Container"));w(re,U("Gradient"));w(K,U("Runner"));Dt.extend(mn());Hr([_,C,F,g,kt,vt,Ct,L]);jr();class P extends J{constructor(t){super(M("filter",t),t),this.$source="SourceGraphic",this.$sourceAlpha="SourceAlpha",this.$background="BackgroundImage",this.$backgroundAlpha="BackgroundAlpha",this.$fill="FillPaint",this.$stroke="StrokePaint",this.$autoSetIn=!0}put(t,s){return t=super.put(t,s),!t.attr("in")&&this.$autoSetIn&&t.attr("in",this.$source),t.attr("result")||t.attr("result",t.id()),t}remove(){return this.targets().each("unfilter"),super.remove()}targets(){return At('svg [filter*="'+this.id()+'"]')}toString(){return"url(#"+this.id()+")"}}class ys extends J{constructor(t,s){super(t,s),this.result(this.id())}in(t){if(t==null){const s=this.attr("in");return this.parent()&&this.parent().find(`[result="${s}"]`)[0]||s}return this.attr("in",t)}result(t){return this.attr("result",t)}toString(){return this.result()}}const nt=e=>function(...t){for(let s=e.length;s--;)t[s]!=null&&this.attr(e[s],t[s])},No={blend:nt(["in","in2","mode"]),colorMatrix:nt(["type","values"]),composite:nt(["in","in2","operator"]),convolveMatrix:function(e){e=new kt(e).toString(),this.attr({order:Math.sqrt(e.split(" ").length),kernelMatrix:e})},diffuseLighting:nt(["surfaceScale","lightingColor","diffuseConstant","kernelUnitLength"]),displacementMap:nt(["in","in2","scale","xChannelSelector","yChannelSelector"]),dropShadow:nt(["in","dx","dy","stdDeviation"]),flood:nt(["flood-color","flood-opacity"]),gaussianBlur:function(e=0,t=e){this.attr("stdDeviation",e+" "+t)},image:function(e){this.attr("href",e,Yt)},morphology:nt(["operator","radius"]),offset:nt(["dx","dy"]),specularLighting:nt(["surfaceScale","lightingColor","diffuseConstant","specularExponent","kernelUnitLength"]),tile:nt([]),turbulence:nt(["baseFrequency","numOctaves","seed","stitchTiles","type"])},Ro=["blend","colorMatrix","componentTransfer","composite","convolveMatrix","diffuseLighting","displacementMap","dropShadow","flood","gaussianBlur","image","merge","morphology","offset","specularLighting","tile","turbulence"];Ro.forEach(e=>{const t=Ht(e),s=No[e];P[t+"Effect"]=class extends ys{constructor(i){super(M("fe"+t,i),i)}update(i){return s.apply(this,i),this}},P.prototype[e]=G(function(i,...n){const r=new P[t+"Effect"];return i==null?this.put(r):(typeof i=="function"?i.call(r,r):n.unshift(i),this.put(r).update(n))})});w(P,{merge(e){const t=this.put(new P.MergeEffect);return typeof e=="function"?(e.call(t,t),t):((e instanceof Array?e:[...arguments]).forEach(i=>{i instanceof P.MergeNode?t.put(i):t.mergeNode(i)}),t)},componentTransfer(e={}){const t=this.put(new P.ComponentTransferEffect);if(typeof e=="function")return e.call(t,t),t;if(!e.r&&!e.g&&!e.b&&!e.a){const s=e;e={r:s,g:s,b:s,a:s}}for(const s in e)t.add(new P["Func"+s.toUpperCase()](e[s]));return t}});const Io=["distantLight","pointLight","spotLight","mergeNode","FuncR","FuncG","FuncB","FuncA"];Io.forEach(e=>{const t=Ht(e);P[t]=class extends ys{constructor(s){super(M("fe"+t,s),s)}}});const To=["funcR","funcG","funcB","funcA"];To.forEach(function(e){const t=P[Ht(e)],s=G(function(){return this.put(new t)});P.ComponentTransferEffect.prototype[e]=s});const Oo=["distantLight","pointLight","spotLight"];Oo.forEach(e=>{const t=P[Ht(e)],s=G(function(){return this.put(new t)});P.DiffuseLightingEffect.prototype[e]=s,P.SpecularLightingEffect.prototype[e]=s});w(P.MergeEffect,{mergeNode(e){return this.put(new P.MergeNode).attr("in",e)}});w(Ee,{filter:function(e){const t=this.put(new P);return typeof e=="function"&&e.call(t,t),t}});w($,{filter:function(e){return this.defs().filter(e)}});w(J,{filterWith:function(e){const t=e instanceof P?e:this.defs().filter(e);return this.attr("filter",t)},unfilter:function(e){return this.attr("filter",null)},filterer(){return this.reference("filter")}});const Eo={blend:function(e,t){return this.parent()&&this.parent().blend(this,e,t)},colorMatrix:function(e,t){return this.parent()&&this.parent().colorMatrix(e,t).in(this)},componentTransfer:function(e){return this.parent()&&this.parent().componentTransfer(e).in(this)},composite:function(e,t){return this.parent()&&this.parent().composite(this,e,t)},convolveMatrix:function(e){return this.parent()&&this.parent().convolveMatrix(e).in(this)},diffuseLighting:function(e,t,s,i){return this.parent()&&this.parent().diffuseLighting(e,s,i).in(this)},displacementMap:function(e,t,s,i){return this.parent()&&this.parent().displacementMap(this,e,t,s,i)},dropShadow:function(e,t,s){return this.parent()&&this.parent().dropShadow(this,e,t,s).in(this)},flood:function(e,t){return this.parent()&&this.parent().flood(e,t)},gaussianBlur:function(e,t){return this.parent()&&this.parent().gaussianBlur(e,t).in(this)},image:function(e){return this.parent()&&this.parent().image(e)},merge:function(e){return e=e instanceof Array?e:[...e],this.parent()&&this.parent().merge(this,...e)},morphology:function(e,t){return this.parent()&&this.parent().morphology(e,t).in(this)},offset:function(e,t){return this.parent()&&this.parent().offset(e,t).in(this)},specularLighting:function(e,t,s,i,n){return this.parent()&&this.parent().specularLighting(e,s,i,n).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(e,t,s,i,n){return this.parent()&&this.parent().turbulence(e,t,s,i,n).in(this)}};w(ys,Eo);w(P.MergeEffect,{in:function(e){return e instanceof P.MergeNode?this.add(e,0):this.add(new P.MergeNode().in(e),0),this}});w([P.CompositeEffect,P.BlendEffect,P.DisplacementMapEffect],{in2:function(e){if(e==null){const t=this.attr("in2");return this.parent()&&this.parent().find(`[result="${t}"]`)[0]||t}return this.attr("in2",e)}});P.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]};const Kt=e=>e.touches||[{clientX:e.clientX,clientY:e.clientY}];w(Ae,{panZoom(e){var ct,Gt,le,ue,ce,fe,Xt,Mt,de,pe,me;if(this.off(".panZoom"),e===!1)return this;e=e!=null?e:{};const t=(ct=e.zoomFactor)!=null?ct:2,s=(Gt=e.zoomMin)!=null?Gt:Number.MIN_VALUE,i=(le=e.zoomMax)!=null?le:Number.MAX_VALUE,n=(ue=e.wheelZoom)!=null?ue:!0,r=(ce=e.pinchZoom)!=null?ce:!0,o=(fe=e.panning)!=null?fe:!0,h=(Xt=e.panButton)!=null?Xt:0,a=(Mt=e.oneFingerPan)!=null?Mt:!1,l=(de=e.margins)!=null?de:!1,c=(pe=e.wheelZoomDeltaModeLinePixels)!=null?pe:17,u=(me=e.wheelZoomDeltaModeScreenPixels)!=null?me:53;let f,m,N=!1;const b=this.viewbox(),d=x=>{if(!l)return x;const{top:E,left:z,bottom:Z,right:ot}=l,{width:H,height:st}=this.attr(["width","height"]),S=this.node.preserveAspectRatio.baseVal;let at=0,ft=0,R=0,it=0;if(S.align!==S.SVG_PRESERVEASPECTRATIO_NONE){const ye=H/st,xe=b.width/b.height;if(xe!==ye){const xs=S.meetOrSlice!==S.SVG_MEETORSLICE_SLICE,Me=ye>xe?"width":"height",bs=Me==="width",ws=xs&&bs||!xs&&!bs,Ii=ws?ye/xe:xe/ye,xt=x[Me]-x[Me]*Ii;ws?S.align===S.SVG_PRESERVEASPECTRATIO_XMIDYMIN||S.align===S.SVG_PRESERVEASPECTRATIO_XMIDYMID||S.align===S.SVG_PRESERVEASPECTRATIO_XMIDYMAX?(at=xt/2,ft=-xt/2):S.align===S.SVG_PRESERVEASPECTRATIO_XMINYMIN||S.align===S.SVG_PRESERVEASPECTRATIO_XMINYMID||S.align===S.SVG_PRESERVEASPECTRATIO_XMINYMAX?ft=-xt:(S.align===S.SVG_PRESERVEASPECTRATIO_XMAXYMIN||S.align===S.SVG_PRESERVEASPECTRATIO_XMAXYMID||S.align===S.SVG_PRESERVEASPECTRATIO_XMAXYMAX)&&(at=xt):S.align===S.SVG_PRESERVEASPECTRATIO_XMINYMID||S.align===S.SVG_PRESERVEASPECTRATIO_XMIDYMID||S.align===S.SVG_PRESERVEASPECTRATIO_XMAXYMID?(R=xt/2,it=-xt/2):S.align===S.SVG_PRESERVEASPECTRATIO_XMINYMIN||S.align===S.SVG_PRESERVEASPECTRATIO_XMIDYMIN||S.align===S.SVG_PRESERVEASPECTRATIO_XMAXYMIN?it=-xt:(S.align===S.SVG_PRESERVEASPECTRATIO_XMINYMAX||S.align===S.SVG_PRESERVEASPECTRATIO_XMIDYMAX||S.align===S.SVG_PRESERVEASPECTRATIO_XMAXYMAX)&&(R=xt)}}const Ut=b.width+b.x-z-at,ge=b.x+ot-x.width-ft,Qt=b.height+b.y-E-R,Ri=b.y+Z-x.height-it;return x.x=Math.min(Ut,Math.max(ge,x.x)),x.y=Math.min(Qt,Math.max(Ri,x.y)),x},k=function(x){x.preventDefault();let E;switch(x.deltaMode){case 1:E=x.deltaY*c;break;case 2:E=x.deltaY*u;break;default:E=x.deltaY;break}let z=Math.pow(1+t,-1*E/100)*this.zoom();const Z=this.point(x.clientX,x.clientY);if(z>i&&(z=i),z<s&&(z=s),this.dispatch("zoom",{level:z,focus:Z}).defaultPrevented)return this;if(this.zoom(z,Z),l){const ot=d(this.viewbox());this.viewbox(ot)}},B=function(x){if(m=Kt(x),m.length<2){o&&a&&V.call(this,x);return}o&&a&&Q.call(this,x),x.preventDefault(),!this.dispatch("pinchZoomStart",{event:x}).defaultPrevented&&(this.off("touchstart.panZoom",B),N=!0,Ot(document,"touchmove.panZoom",X,this,{passive:!1}),Ot(document,"touchend.panZoom",q,this,{passive:!1}))},q=function(x){x.preventDefault();const E=Kt(x);E.length>1||(N=!1,this.dispatch("pinchZoomEnd",{event:x}),ut(document,"touchmove.panZoom",X),ut(document,"touchend.panZoom",q),this.on("touchstart.panZoom",B),E.length&&o&&a&&V.call(this,x))},X=function(x){x.preventDefault();const E=Kt(x),z=this.zoom(),Z=Math.sqrt(Math.pow(m[0].clientX-m[1].clientX,2)+Math.pow(m[0].clientY-m[1].clientY,2)),ot=Math.sqrt(Math.pow(E[0].clientX-E[1].clientX,2)+Math.pow(E[0].clientY-E[1].clientY,2));let H=Z/ot;(z<s&&H>1||z>i&&H<1)&&(H=1);const st={x:E[0].clientX+.5*(E[1].clientX-E[0].clientX),y:E[0].clientY+.5*(E[1].clientY-E[0].clientY)},S={x:m[0].clientX+.5*(m[1].clientX-m[0].clientX),y:m[0].clientY+.5*(m[1].clientY-m[0].clientY)},at=this.point(st.x,st.y),ft=this.point(2*st.x-S.x,2*st.y-S.y),R=new F(this.viewbox()).transform(new g().translate(-ft.x,-ft.y).scale(H,0,0).translate(at.x,at.y));d(R),this.viewbox(R),m=E,this.dispatch("zoom",{box:R,focus:ft})},V=function(x){x.type.indexOf("mouse")>-1&&x.button!==h&&x.which!==h+1||(x.preventDefault(),this.off("mousedown.panZoom",V),m=Kt(x),!N&&(this.dispatch("panStart",{event:x}),f={x:m[0].clientX,y:m[0].clientY},Ot(document,"touchmove.panZoom mousemove.panZoom",et,this,{passive:!1}),Ot(document,"touchend.panZoom mouseup.panZoom",Q,this,{passive:!1})))},Q=function(x){x.preventDefault(),ut(document,"touchmove.panZoom mousemove.panZoom",et),ut(document,"touchend.panZoom mouseup.panZoom",Q),this.on("mousedown.panZoom",V),this.dispatch("panEnd",{event:x})},et=function(x){x.preventDefault();const E=Kt(x),z={x:E[0].clientX,y:E[0].clientY},Z=this.point(z.x,z.y),ot=this.point(f.x,f.y),H=[ot.x-Z.x,ot.y-Z.y];if(!H[0]&&!H[1])return;const st=new F(this.viewbox()).transform(new g().translate(H[0],H[1]));f=z,d(st),!this.dispatch("panning",{box:st,event:x}).defaultPrevented&&this.viewbox(st)};return n&&this.on("wheel.panZoom",k,this,{passive:!1}),r&&this.on("touchstart.panZoom",B,this,{passive:!1}),o&&this.on("mousedown.panZoom",V,this,{passive:!1}),this}});function Ms(){document.querySelectorAll("[role=checkbox].disabled").forEach((t,s)=>{t.classList.add("hidden")})}const Do=Yi({name:"FretboardTool",data:()=>({miniState:!1,selectionDialog:!1,morphGroupModel:"btn",nextMorphStep:{btn:"selections",selections:"btn"},leftDrawerOpen:!0,rightDrawerOpen:!1,key:"E",keyOptions:["E","F","Gb","G","Ab","A","Bb","B","C","Db","D","Eb"],Drawing:null,Fretboard:null,Headstock:null,Body:null,Strings:[],Guides:[],Dots:[],SideDots:[],Frets:[],notes:[],fretMarkers:[],xoffsets:[],yoffsets:[],accBoxes:[],accPatterns:[],accScales:[],accRootNotes:[],allShapes:null,allNotes:null,allMarkers:null,allStrings:null,allDots:null,allFrets:null,xScaleSlider:null,yScaleSlider:null,zScaleSlider:null,xRotationSlider:null,yRotationSlider:null,zRotationSlider:null,xTranslateSlider:null,yTranslateSlider:null,zTranslateSlider:null,xSkewSlider:null,ySkewSlider:null,perspectiveSlider:null,fretGradient:null,boxShadow:null,PanZoom:null,CORNEROFFSET:10,ESTRING1:0,BSTRING:1,GSTRING:2,DSTRING:3,ASTRING:4,ESTRING2:5,FRETWIDTH:10,PAD:25,NOTERADIUS:15,NOTECOLOR:"#fff",NOTESTROKE:"none",BOXPADDING:20,MAJORNOTE:"#0ff",MINORNOTE:"#f55",CORNERRADIUS:"A20,20 0 0 1",SHAPEFILL:{color:"#777777",opacity:.3},SHAPESTROKE:{color:"#aaaaaa",opacity:2},CHORDI:"#0099ff",CHORDIV:"#FFEF00",CHORDV:"#FF0000",MAJOR:"#3bc33b",MINOR:"#a01404",CHORDOPACITY:.4,STRINGFILL:"#555",FRETBOARDFILL:"https://txba-media.s3.us-east-1.amazonaws.com/misc/RosewoodTexture.jpg",HEADSTOCKFILL:"https://txba-media.s3.us-east-1.amazonaws.com/misc/LayeredMaple.jpg",BODYFILL:"https://txba-media.s3.us-east-1.amazonaws.com/misc/DarkWood.jpg",keyLimits:[[4,11,3,8],[4,11,3,7],[4,11,2,7],[3,10,2,7],[3,10,2,6],[2,9,1,6],[2,9,1,5],[1,8,1,5],[1,8,1,5],[0,11,0,4],[0,10,0,4],[0,10,0,4]],boxFilters:[{shapeType:"box2",position:2,rootOffset:-9,id:"box2Lower",label:"Box 2 (lower)"},{shapeType:"box2",position:3,rootOffset:-7,id:"box3Lower",label:"Box 3 (lower)"},{shapeType:"box4",position:4,rootOffset:-5,id:"box4Lower",label:"Box 4 (lower)"},{shapeType:"box1",position:5,rootOffset:-3,id:"box5Lower",label:"Box 5 (lower)"},{shapeType:"box1",position:1,rootOffset:0,id:"box1Root",label:"Box 1"},{shapeType:"box2",position:2,rootOffset:3,id:"box2Root",label:"Box 2"},{shapeType:"box2",position:3,rootOffset:5,id:"box3Root",label:"Box 3"},{shapeType:"box4",position:4,rootOffset:7,id:"box4Root",label:"Box 4"},{id:"box5Root",rootOffset:9,position:5,shapeType:"box1",label:"Box 5"},{shapeType:"box1",position:1,rootOffset:12,id:"box1Upper",label:"Box 1 (upper)"},{shapeType:"box2",position:2,rootOffset:15,id:"box2Upper",label:"Box 2 (upper)"},{shapeType:"box2",position:3,rootOffset:17,id:"box3Upper",label:"Box 3 (upper)"},{shapeType:"box1",position:4,rootOffset:19,id:"box4Upper",label:"Box 4 (upper)"}],scaleFilters:[{value:"majorScale",label:"Major Scale",disable:!0},{value:"minorScale",label:"Minor Scale",disable:!0},{value:"majorPentatonic",label:"Major Pentatonic"},{value:"minorPentatonic",label:"Minor Pentatonic"}],patternFilters:[{shapeType:"backdoor1",position:2,rootOffset:-9,id:"backdoor2Lower",label:"Backdoor Pattern 2 (lower)"},{shapeType:"backdoor2",position:3,rootOffset:-5,id:"backdoor3Lower",label:"Backdoor Pattern 3 (lower)"},{shapeType:"backdoor2",position:4,rootOffset:-2,id:"backdoor4Lower",label:"Backdoor Pattern 1"},{shapeType:"backdoor1",position:1,rootOffset:0,id:"backdoor1Root",label:"Backdoor Pattern 1"},{shapeType:"backdoor2",position:2,rootOffset:3,id:"backdoor2Root",label:"Backdoor Pattern 2"},{shapeType:"backdoor1",position:3,rootOffset:7,id:"backdoor3Root",label:"Backdoor Pattern 3"},{shapeType:"backdoor2",position:4,rootOffset:20,id:"backdoor4Root",label:"Backdoor Pattern 4"},{shapeType:"backdoor1",position:1,rootOffset:12,id:"backdoor1Upper",label:"Backdoor Pattern 1 (upper)"},{shapeType:"backdoor1",position:2,rootOffset:15,id:"backdoor2Upper",label:"Backdoor Pattern 2 (upper)"},{shapeType:"backdoor2",position:3,rootOffset:19,id:"backdoor3Upper",label:"Backdoor Pattern 3 (upper)"}],rootNoteFilters:[{value:"root1Notes",label:"I Chord Root Notes"},{value:"root4Notes",label:"IV Chord Root Notes"},{value:"root5Notes",label:"V Chord Root Notes"}]}),mounted(){window.canvas=je().addTo("body"),this.Drawing=je("#fretboard-wrapper").panZoom({zoomMin:.3,zoomMax:1.5}),this.Body=this.Drawing.path("M2832.6,721.7 C2744.0,725.3 2674.1,735.3 2623.1,751.7 C2546.6,776.2 2299.6,869.2 2178.5,877.7 C2060.6,886.0 1892.3,886.0 1821.0,786.2 C1783.5,733.7 1782.0,696.6 1806.0,670.1 C1830.0,643.6 1953.5,647.6 2025.5,624.6 C2097.5,601.6 2173.0,515.6 2186.5,451.1 C2200.0,386.6 2186.3,340.7 2145.0,309.5 C2078.0,258.8 2070.2,157.7 2121.5,15.9 C2203.8,12.3 2278.7,10.4 2346.1,10.4 C2379.6,10.4 2428.1,-109.1 2420.6,-167.6 C2413.1,-226.1 2386.6,-301.2 2306.1,-341.7 C2225.5,-382.2 2114.5,-352.2 2097.5,-437.2 C2083.9,-505.3 2161.0,-544.7 2248.1,-568.7 C2335.1,-592.7 2439.6,-571.2 2540.1,-539.2 C2640.6,-507.2 2751.5,-445.2 2828.6,-445.2 C2832.4,-445.2 2833.7,-56.2 2832.6,721.7 Z"),this.Body.fill(this.BODYFILL),this.Body.stroke({width:3,color:"#555"}),this.Headstock=this.Drawing.path("M1.0,50.5 C-65.5,45.2 -111.3,36.9 -136.2, 25.6 C-173.6, 8.6 -209.1, -25.5 -223.0, -52.0 C-232.4, -69.7 -240.3, -81.3 -247.0,-87.0 L -246.0,326.2 L -147.2, 356.2 C-134.6, 361.3 -121.4, 361.3 -107.8, 356.2 C-87.3, 348.7 -68.4, 312.4 -44.4, 291.7 C-28.4, 277.9 -13.3, 270.0 1.0, 268.0 L 1.0, 50.5 Z"),this.Headstock.fill(this.HEADSTOCKFILL),this.Headstock.stroke({width:3,color:"#555"}),this.Fretboard=this.Drawing.path("M3,51.955	L2455.262,3	C2468.431,4.1024	2478.30815,7.96089385	2484.89264,14.575419	C2494.76938,24.4972067	2503,107.178771	2503,151	C2503,194.821229	2494.76938,275.849162	2484.89264,287.424581	C2478.30815,295.141527	2468.43141,299	2455.26243,299	L3.64612326,266.581006	L3,51.9553073	Z"),this.Fretboard.fill(this.FRETBOARDFILL),this.Fretboard.stroke({width:3,color:"#444"}),this.Fretboard.front(),this.Fretboard.filterWith(function(e){var t=e.offset(10,10).gaussianBlur(15);t.in(e.sourceAlpha),e.blend(e.source,t),this.size("200%","200%").move("-50%","-50%")}),this.fretGradient=this.Drawing.gradient("linear",function(e){e.stop(0,"#333"),e.stop(.5,"#444"),e.stop(1,"#222")}),this.createDots(),this.createFrets(),this.createFretMarkers(),this.createStrings(),this.createNotes(),this.computeNoteBoxes(),this.computeOffsets(),this.allDots.front(),this.allMarkers.front(),this.allStrings.front(),this.allNotes.front(),this.allShapes=this.Drawing.group(),this.refreshUI()},watch:{selectedOptions(e,t){this.refreshUI(),console.log({nVal:e,oVal:t})},fetchDrawer(e){e&&this.toggleLeftDrawer()},boxSelections:{handler:Ms,immediate:!0},patternSelections:{handler(e){document.querySelectorAll("[role=checkbox].disabled").forEach((s,i)=>{s.classList.add("hidden")})},immediate:!0}},computed:{selectedOptions(){return[...this.boxesSelected,...this.patternsSelected,...this.scalesSelected,...this.rootsSelected]},selectionsAvailable(){return this.accBoxes.length+this.accPatterns.length+this.accScales.length+this.accRootNotes.length>0},scalesSelected(){return this.scaleFilters.filter(({label:t,value:s})=>{if(this.accScales.includes(s))return t}).map(({label:t,value:s})=>({label:t,value:s,icon:"queue_music"}))},rootsSelected(){return this.rootNoteFilters.filter(({label:t,value:s})=>{if(this.accRootNotes.includes(s))return t}).map(({label:t,value:s})=>({label:t,value:s,icon:"music_note"}))},boxesSelected(){return this.boxFilters.filter(({label:t,id:s})=>{if(this.accBoxes.includes(s))return t}).map(({label:t,id:s})=>({label:t,value:s,icon:"widgets"}))},boxSelections(){let e=this.keyLimits[this.keyOptions.indexOf(this.key)],t=this.boxFilters.map(({label:s,id:i})=>({value:i,label:s}));return t.forEach((s,i)=>{s.disable=i<e[0]||i>e[1]}),t},patternsSelected(){return this.patternSelections.filter(({label:t,value:s})=>{if(this.accPatterns.includes(s))return t}).map(({label:t,value:s})=>({label:t,value:s,icon:"rounded_corner"}))},patternSelections(){let e=this.keyLimits[this.keyOptions.indexOf(this.key)],t=this.patternFilters.map(({label:s,id:i})=>({value:i,label:s}));return t.forEach((s,i)=>{s.disable=i<e[0]||i>e[1]}),t},selectedBoxData(){let e=[],t;return this.accBoxes.forEach(s=>{t=this.boxFilters.filter(i=>i.id==s),e.push(t)}),e}},methods:{log(e){console.log(`${JSON.stringify(e)} has been removed`)},setSelectionDialog(e){e||(this.selectionDialog=!0),this.selectionDialog=e},setKey(e){this.key=e,this.refreshUI()},drawerClick(e){this.miniState&&(this.miniState=!1,e.stopPropagation())},nextMorph(){this.morphGroupModel=this.nextMorphStep[this.morphGroupModel]},removeFilter(e){let t=e.value;t.includes("box")?(console.log("Removing type: box"),this.accBoxes=[...this.accBoxes.filter(s=>s!=t)]):t.includes("backdoor")?(console.log("Removing type: backdoor"),this.accPatterns=[...this.accPatterns.filter(s=>s!=t)]):["minor","major"].some(s=>t.includes(s))?(console.log("Removing type: scales "),this.accScales=[...this.accScales.filter(s=>s!=t)]):(console.log("Removing type: roots "),this.accRootNotes=[...this.accRootNotes.filter(s=>s!=t)]),this.updateFretboard()},toggleResultPanel(e){this.nextMorph();let t=typeof e=="boolean"?e:!this.rightDrawerOpen;console.log(`val (${typeof e}): ${e}`),console.log(`drawer ${t?"open":"closed"}`),this.rightDrawerOpen=t},toggleLeftDrawer(){this.leftDrawerOpen=!this.leftDrawerOpen},getAvailableSelections(e){let t=this.keyLimits[this.keyOptions.indexOf(this.key)],s=e.map(({label:i,id:n})=>({value:n,label:i}));return s.forEach((i,n)=>{i.disabled=n<t[0]||n>t[1]}),s},updateFretboard(){let e=[];this.resetFretboard(),this.rootFret=parseInt(this.keyOptions.indexOf(this.key)),this.accBoxes.forEach(t=>{let s=this.boxFilters.filter(i=>i.id==t);e=[...e,...s]}),this.accPatterns.forEach(t=>{let s=this.patternFilters.filter(i=>i.id==t);e=[...e,...s]}),this.drawFretMarker(this.rootFret-7,this.CHORDIV),this.drawFretMarker(this.rootFret-5,this.CHORDV),this.drawFretMarker(this.rootFret,this.CHORDI),this.drawFretMarker(this.rootFret+5,this.CHORDIV),this.drawFretMarker(this.rootFret+7,this.CHORDV),this.drawFretMarker(this.rootFret+12,this.CHORDI),this.drawFretMarker(this.rootFret+17,this.CHORDIV),this.drawFretMarker(this.rootFret+19,this.CHORDV);for(let t=0;t<e.length;t++){let s=e[t];switch(s.shapeType){case"box1":this.drawBox1(this.rootFret+s.rootOffset,s.position);break;case"box2":this.drawBox2(this.rootFret+s.rootOffset,s.position);break;case"box4":this.drawBox4(this.rootFret+s.rootOffset);break;case"backdoor1":this.drawBackdoorPattern1(this.rootFret+s.rootOffset,s.position);break;case"backdoor2":this.drawBackdoorPattern2(this.rootFret+s.rootOffset,s.position);break}}this.accScales.includes("majorScale")&&this.drawMajorScale(this.rootFret),this.accScales.includes("minorScale")&&this.drawMinorScale(this.rootFret),this.accScales.includes("majorPentatonic")&&this.drawMajorPentatonic(this.rootFret),this.accScales.includes("minorPentatonic")&&this.drawMinorPentatonic(this.rootFret),this.accRootNotes.includes("root1Notes")&&this.drawRootNotes(this.rootFret,1,!1),this.accRootNotes.includes("root4Notes")&&this.drawRootNotes(this.rootFret,4,!1),this.accRootNotes.includes("root5Notes")&&this.drawRootNotes(this.rootFret,5,!1),this.allShapes.filterWith(function(t){var s=t.offset(5,5).gaussianBlur(5);s.in(t.sourceAlpha),t.blend(t.source,s),this.size("200%","200%").move("-50%","-50%")}),this.allNotes.front(),this.allNotes.filterWith(function(t){var s=t.offset(2,2).gaussianBlur(2);s.in(t.sourceAlpha),t.blend(t.source,s),this.size("200%","200%").move("-50%","-50%")}),console.log("Fretboard refreshed")},createDots(){this.allDots=this.Drawing.group(),this.Dots.push({x:502.5,y:160.5}),this.Dots.push({x:820.5,y:158.5}),this.Dots.push({x:1103.5,y:158.5}),this.Dots.push({x:1359.5,y:157.5}),this.Dots.push({x:1689.5,y:97.5}),this.Dots.push({x:1969.5,y:155.5}),this.Dots.push({x:2131.5,y:155.5}),this.Dots.push({x:2274.5,y:153.5}),this.Dots.push({x:2402.5,y:153.5}),this.Dots.push({x:1689.5,y:214.5}),this.SideDots.push({x:502.5,y:300}),this.SideDots.push({x:820.5,y:303}),this.SideDots.push({x:1103.5,y:305}),this.SideDots.push({x:1359.5,y:310}),this.SideDots.push({x:1670,y:314}),this.SideDots.push({x:1969.5,y:320}),this.SideDots.push({x:2131.5,y:322}),this.SideDots.push({x:2274.5,y:325}),this.SideDots.push({x:2402.5,y:328}),this.SideDots.push({x:1700,y:315});for(let e=0;e<this.Dots.length;e++)this.allDots.circle(30).move(this.Dots[e].x-15,this.Dots[e].y-15).fill("#333");for(let e=0;e<this.SideDots.length;e++)this.allDots.circle(10).move(this.SideDots[e].x-5,this.SideDots[e].y-5).fill("#FFF")},createStrings(){this.allStrings=this.Drawing.group(),this.Strings.push({pt1:{x:0,y:67.5},pt2:{x:2489,y:26}},{pt1:{x:0,y:104},pt2:{x:2498,y:78}},{pt1:{x:0,y:140},pt2:{x:2503,y:127}},{pt1:{x:0,y:177.5},pt2:{x:2502,y:177.5}},{pt1:{x:0,y:216},pt2:{x:2498,y:230}},{pt1:{x:0,y:251.5},pt2:{x:2489,y:279}}),this.Guides.push({pt1:{x:this.Strings[0].pt1.x,y:this.Strings[0].pt1.y-(this.Strings[1].pt1.y-this.Strings[0].pt1.y)/2},pt2:{x:this.Strings[0].pt2.x,y:this.Strings[0].pt2.y-(this.Strings[1].pt2.y-this.Strings[0].pt2.y)/2}}),this.Guides.push({pt1:{x:this.Strings[1].pt1.x,y:this.Strings[0].pt1.y+(this.Strings[1].pt1.y-this.Strings[0].pt1.y)/2},pt2:{x:this.Strings[1].pt2.x,y:this.Strings[0].pt2.y+(this.Strings[1].pt2.y-this.Strings[0].pt2.y)/2}}),this.Guides.push({pt1:{x:this.Strings[2].pt1.x,y:this.Strings[1].pt1.y+(this.Strings[2].pt1.y-this.Strings[1].pt1.y)/2},pt2:{x:this.Strings[2].pt2.x,y:this.Strings[1].pt2.y+(this.Strings[2].pt2.y-this.Strings[1].pt2.y)/2}}),this.Guides.push({pt1:{x:this.Strings[3].pt1.x,y:this.Strings[2].pt1.y+(this.Strings[3].pt1.y-this.Strings[2].pt1.y)/2},pt2:{x:this.Strings[3].pt2.x,y:this.Strings[2].pt2.y+(this.Strings[3].pt2.y-this.Strings[2].pt2.y)/2}}),this.Guides.push({pt1:{x:this.Strings[4].pt1.x,y:this.Strings[3].pt1.y+(this.Strings[4].pt1.y-this.Strings[3].pt1.y)/2},pt2:{x:this.Strings[4].pt2.x,y:this.Strings[3].pt2.y+(this.Strings[4].pt2.y-this.Strings[3].pt2.y)/2}}),this.Guides.push({pt1:{x:this.Strings[5].pt1.x,y:this.Strings[4].pt1.y+(this.Strings[5].pt1.y-this.Strings[4].pt1.y)/2},pt2:{x:this.Strings[5].pt2.x,y:this.Strings[4].pt2.y+(this.Strings[5].pt2.y-this.Strings[4].pt2.y)/2}}),this.Guides.push({pt1:{x:this.Strings[5].pt1.x,y:this.Strings[5].pt1.y+(this.Strings[5].pt1.y-this.Strings[4].pt1.y)/2},pt2:{x:this.Strings[5].pt2.x,y:this.Strings[5].pt2.y+(this.Strings[5].pt2.y-this.Strings[4].pt2.y)/2}});var e=[3,4,5,6,7,8];for(let i=0;i<this.Strings.length;i++){var t=this.Strings[i].pt1.x+","+(this.Strings[i].pt1.y-e[i]/2)+" ";t+=this.Strings[i].pt2.x+","+(this.Strings[i].pt2.y-e[i]/2)+" ",t+=this.Strings[i].pt2.x+","+(this.Strings[i].pt2.y+e[i]/2)+" ",t+=this.Strings[i].pt1.x+","+(this.Strings[i].pt1.y+e[i]/2)+" ";var s=this.allStrings.polygon(t);s.fill(this.STRINGFILL),this.Strings[i].svgElement=s}this.allStrings.filterWith(function(i){var n=i.offset(5,5).gaussianBlur(5);n.in(i.sourceAlpha),i.blend(i.source,n),this.size("200%","200%").move("-50%","-50%")})},createNotes(){this.allNotes=this.Drawing.group();var e=[];e.push({x:18.5,y:66.5}),e.push({x:18.5,y:104.5}),e.push({x:18.5,y:140.5}),e.push({x:18.5,y:178.5}),e.push({x:18.5,y:214.5}),e.push({x:18.5,y:252.5}),this.notes.push(e),e=[],e.push({x:139.5,y:63.5}),e.push({x:139.5,y:102.5}),e.push({x:139.5,y:139.5}),e.push({x:139.5,y:178.5}),e.push({x:139.5,y:215.5}),e.push({x:139.5,y:253.5}),this.notes.push(e),e=[],e.push({x:327.5,y:60.5}),e.push({x:327.5,y:100.5}),e.push({x:327.5,y:138.5}),e.push({x:327.5,y:177.5}),e.push({x:327.5,y:216.5}),e.push({x:327.5,y:255.5}),this.notes.push(e),e=[],e.push({x:499.5,y:58.5}),e.push({x:499.5,y:98.5}),e.push({x:499.5,y:137.5}),e.push({x:499.5,y:177.5}),e.push({x:499.5,y:218.5}),e.push({x:499.5,y:257.5}),this.notes.push(e),e=[],e.push({x:660.5,y:55.5}),e.push({x:660.5,y:96.5}),e.push({x:660.5,y:136.5}),e.push({x:660.5,y:177.5}),e.push({x:660.5,y:218.5}),e.push({x:660.5,y:258.5}),this.notes.push(e),e=[],e.push({x:815.5,y:52.5}),e.push({x:815.5,y:94.5}),e.push({x:815.5,y:135.5}),e.push({x:815.5,y:177.5}),e.push({x:815.5,y:218.5}),e.push({x:815.5,y:260.5}),this.notes.push(e),e=[],e.push({x:964.5,y:49.5}),e.push({x:964.5,y:92.5}),e.push({x:964.5,y:134.5}),e.push({x:964.5,y:177.5}),e.push({x:964.5,y:219.5}),e.push({x:964.5,y:262.5}),this.notes.push(e),e=[],e.push({x:1102.5,y:48.5}),e.push({x:1102.5,y:90.5}),e.push({x:1102.5,y:134.5}),e.push({x:1102.5,y:177.5}),e.push({x:1102.5,y:221.5}),e.push({x:1102.5,y:263.5}),this.notes.push(e),e=[],e.push({x:1234.5,y:45.5}),e.push({x:1234.5,y:90.5}),e.push({x:1234.5,y:133.5}),e.push({x:1234.5,y:178.5}),e.push({x:1234.5,y:221.5}),e.push({x:1234.5,y:263.5}),this.notes.push(e),e=[],e.push({x:1358.5,y:43.5}),e.push({x:1358.5,y:89.5}),e.push({x:1358.5,y:132.5}),e.push({x:1358.5,y:178.5}),e.push({x:1358.5,y:222.5}),e.push({x:1358.5,y:266.5}),this.notes.push(e),e=[],e.push({x:1474.5,y:41.5}),e.push({x:1474.5,y:89.5}),e.push({x:1474.5,y:132.5}),e.push({x:1474.5,y:178.5}),e.push({x:1474.5,y:223.5}),e.push({x:1474.5,y:268.5}),this.notes.push(e),e=[],e.push({x:1586.5,y:38.5}),e.push({x:1586.5,y:86.5}),e.push({x:1586.5,y:131.5}),e.push({x:1586.5,y:178.5}),e.push({x:1586.5,y:224.5}),e.push({x:1586.5,y:269.5}),this.notes.push(e),e=[],e.push({x:1689.5,y:38.5}),e.push({x:1689.5,y:87.5}),e.push({x:1689.5,y:131.5}),e.push({x:1689.5,y:178.5}),e.push({x:1689.5,y:224.5}),e.push({x:1689.5,y:270.5}),this.notes.push(e),e=[],e.push({x:1786.5,y:36.5}),e.push({x:1786.5,y:84.5}),e.push({x:1786.5,y:130.5}),e.push({x:1786.5,y:178.5}),e.push({x:1786.5,y:224.5}),e.push({x:1786.5,y:270.5}),this.notes.push(e),e=[],e.push({x:1879.5,y:35.5}),e.push({x:1879.5,y:83.5}),e.push({x:1879.5,y:129.5}),e.push({x:1879.5,y:178.5}),e.push({x:1879.5,y:225.5}),e.push({x:1879.5,y:271.5}),this.notes.push(e),e=[],e.push({x:1968.5,y:34.5}),e.push({x:1968.5,y:82.5}),e.push({x:1968.5,y:129.5}),e.push({x:1968.5,y:177.5}),e.push({x:1968.5,y:225.5}),e.push({x:1968.5,y:273.5}),this.notes.push(e),e=[],e.push({x:2052.5,y:32.5}),e.push({x:2052.5,y:81.5}),e.push({x:2052.5,y:128.5}),e.push({x:2052.5,y:178.5}),e.push({x:2052.5,y:226.5}),e.push({x:2052.5,y:273.5}),this.notes.push(e),e=[],e.push({x:2130.5,y:31.5}),e.push({x:2130.5,y:80.5}),e.push({x:2130.5,y:128.5}),e.push({x:2130.5,y:178.5}),e.push({x:2130.5,y:226.5}),e.push({x:2130.5,y:274.5}),this.notes.push(e),e=[],e.push({x:2204.5,y:30.5}),e.push({x:2204.5,y:79.5}),e.push({x:2204.5,y:128.5}),e.push({x:2204.5,y:178.5}),e.push({x:2204.5,y:227.5}),e.push({x:2204.5,y:275.5}),this.notes.push(e),e=[],e.push({x:2273.5,y:29.5}),e.push({x:2273.5,y:79.5}),e.push({x:2273.5,y:128.5}),e.push({x:2273.5,y:178.5}),e.push({x:2273.5,y:227.5}),e.push({x:2273.5,y:275.5}),this.notes.push(e),e=[],e.push({x:2341.5,y:27.5}),e.push({x:2341.5,y:78.5}),e.push({x:2341.5,y:128.5}),e.push({x:2341.5,y:178.5}),e.push({x:2341.5,y:227.5}),e.push({x:2341.5,y:276.5}),this.notes.push(e),e=[],e.push({x:2402.5,y:27.5}),e.push({x:2402.5,y:78.5}),e.push({x:2402.5,y:128.5}),e.push({x:2402.5,y:178.5}),e.push({x:2402.5,y:229.5}),e.push({x:2402.5,y:277.5}),this.notes.push(e);for(let s=0;s<this.notes.length;s++)for(let i=0;i<this.notes[s].length;i++){var t=this.allNotes.circle(this.NOTERADIUS*2).move(this.notes[s][i].x-this.NOTERADIUS,this.notes[s][i].y-this.NOTERADIUS);t.fill(this.NOTECOLOR),t.stroke(this.NOTESTROKE),this.notes[s][i].svgElement=t}this.allNotes.front()},computeYOnGuide(e,t){var s=e,i=this.Guides[s].pt2.x-this.Guides[s].pt1.x,n=this.Guides[s].pt2.y-this.Guides[s].pt1.y,r=t*(n/i);return this.Guides[s].pt1.y+r},computeYOnString(e,t){var s=e,i=this.Strings[s].pt2.x-this.Strings[s].pt1.x,n=this.Strings[s].pt2.y-this.Strings[s].pt1.y,r=t*(n/i);return this.Strings[s].pt1.y+r},toDegrees(e){var t=Math.PI;return e*(180/t)},computeNoteBoxes(){for(let n=0;n<this.notes.length;n++)for(let r=0;r<this.notes[n].length;r++){var e=r,t=[],s=this.notes[n][r].x;this.notes[n][r].y;var i=this.BOXPADDING;let o=s-i,h=this.computeYOnGuide(e,o);t.push({x:o,y:h}),o=s,h=this.computeYOnGuide(e,o),t.push({x:o,y:h}),o=s+i,h=this.computeYOnGuide(e,o),t.push({x:o,y:h}),o=s+i,h=this.computeYOnString(e,o),t.push({x:o,y:h}),o=s+i,h=this.computeYOnGuide(e+1,o),t.push({x:o,y:h}),o=s,h=this.computeYOnGuide(e+1,o),t.push({x:o,y:h}),o=s-i,h=this.computeYOnGuide(e+1,o),t.push({x:o,y:h}),o=s-i,h=this.computeYOnString(e,o),t.push({x:o,y:h}),this.notes[n][r].box=t}},drawBoundingBox(e,t){var s=this.notes[e][t].box;for(let i=0;i<s.length;i++)this.Drawing.circle(10).move(s[i].x-5,s[i].y-5).fill("#fff")},addPointToString(e,t){return e+","+t+" "},setSharedNote(e,t){this.notes[e][t].svgElement.fill("#ffff00")},drawShape(e,t){var i,n;var s="";for(let r=0;r<t.length;r++)t[r][0]!="R"?s+=t[r][0]:s+=this.CORNERRADIUS,s+=this.addPointToString((i=this.notes[e+t[r][1]][t[r][2]])==null?void 0:i.box[t[r][3]].x,(n=this.notes[e+t[r][1]][t[r][2]])==null?void 0:n.box[t[r][3]].y);s+="Z",this.allShapes.path(s).fill(this.SHAPEFILL).stroke(this.SHAPESTROKE)},calculateBoundaryPoint(e,t,s){var i=0,n=this.notes[e][t],r=n.x;switch(n.y,s){case 0:i=r-this.BOXPADDING,this.computeYOnGuide(t,i);break;case 1:i=r-this.BOXPADDING+this.CORNEROFFSET,this.computeYOnGuide(t,i);break;case 2:i=r,this.computeYOnGuide(t,i);break;case 3:i=r+this.BOXPADDING-this.CORNEROFFSET,this.computeYOnGuide(t,i);break;case 4:i=r+this.BOXPADDING,this.computeYOnGuide(t,i);break;case 5:i=r+this.BOXPADDING,this.computeYOnGuide(t,i)+this.CORNEROFFSET;break;case 6:i=r+this.BOXPADDING,this.computeYOnString(t,i);break;case 7:i=r+this.BOXPADDING,this.computeYOnGuide(t,i)-this.CORNEROFFSET;break;case 8:i=r+this.BOXPADDING,this.computeYOnGuide(t+1,i);break;case 9:i=r+this.BOXPADDING-this.CORNEROFFSET,this.computeYOnGuide(t+1,i);break;case 10:i=r,this.computeYOnGuide(t+1,i);break;case 11:i=r-this.BOXPADDING+this.CORNEROFFSET,this.computeYOnGuide(t+1,i);break;case 12:i=r-this.BOXPADDING,this.computeYOnGuide(t+1,i);break;case 13:i=r-this.BOXPADDING,this.computeYOnGuide(t+1,i)-this.CORNEROFFSET;break;case 14:i=r-this.BOXPADDING,this.computeYOnString(t,i);break;case 15:i=r-this.BOXPADDING,this.computeYOnGuide(t,i)+this.CORNEROFFSET;break}},drawMajorScale:()=>({}),drawMinorScale:()=>({}),drawMinorPentatonic(){this.drawPentatonic(this.rootFret,this.MINOR)},drawMajorPentatonic(){this.drawPentatonic(this.rootFret-3,this.MAJOR)},drawPentatonic(e,t){this.showNote(e,this.ESTRING1,t),this.showNote(e,this.BSTRING,t),this.showNote(e,this.GSTRING,t),this.showNote(e,this.DSTRING,t),this.showNote(e,this.ASTRING,t),this.showNote(e,this.ESTRING2,t),this.showNote(e+3,this.ESTRING1,t),this.showNote(e+3,this.BSTRING,t),this.showNote(e+2,this.GSTRING,t),this.showNote(e+2,this.DSTRING,t),this.showNote(e+2,this.ASTRING,t),this.showNote(e+3,this.ESTRING2,t),this.showNote(e+5,this.ESTRING2,t),this.showNote(e+5,this.BSTRING,t),this.showNote(e+4,this.GSTRING,t),this.showNote(e+5,this.DSTRING,t),this.showNote(e+5,this.ASTRING,t),this.showNote(e+5,this.ESTRING1,t),this.showNote(e+7,this.ESTRING2,t),this.showNote(e+8,this.BSTRING,t),this.showNote(e+7,this.GSTRING,t),this.showNote(e+7,this.DSTRING,t),this.showNote(e+7,this.ASTRING,t),this.showNote(e+7,this.ESTRING1,t),this.showNote(e+10,this.ESTRING2,t),this.showNote(e+10,this.BSTRING,t),this.showNote(e+9,this.GSTRING,t),this.showNote(e+9,this.DSTRING,t),this.showNote(e+10,this.ASTRING,t),this.showNote(e+10,this.ESTRING1,t),this.showNote(e+12,this.ESTRING2,t),this.showNote(e+12,this.BSTRING,t),this.showNote(e+12,this.GSTRING,t),this.showNote(e+12,this.DSTRING,t),this.showNote(e+12,this.ASTRING,t),this.showNote(e+12,this.ESTRING1,t),e<7&&(this.showNote(e+15,this.ESTRING1,t),this.showNote(e+15,this.BSTRING,t),this.showNote(e+14,this.GSTRING,t),this.showNote(e+14,this.DSTRING,t),this.showNote(e+14,this.ASTRING,t),this.showNote(e+15,this.ESTRING2,t)),e<5&&(this.showNote(e+17,this.ESTRING2,t),this.showNote(e+17,this.BSTRING,t),this.showNote(e+16,this.GSTRING,t),this.showNote(e+17,this.DSTRING,t),this.showNote(e+17,this.ASTRING,t),this.showNote(e+17,this.ESTRING1,t)),e<3&&(this.showNote(e+19,this.ESTRING2,t),this.showNote(e+20,this.BSTRING,t),this.showNote(e+19,this.GSTRING,t),this.showNote(e+19,this.DSTRING,t),this.showNote(e+19,this.ASTRING,t),this.showNote(e+19,this.ESTRING1,t))},drawBox1(e,t){var s=parseInt(e);if(!(e<0||e>18)){this.showNote(s,this.ESTRING1),this.showNote(s,this.BSTRING),this.showNote(s,this.GSTRING),this.showNote(s,this.DSTRING),this.showNote(s,this.ASTRING),this.showNote(s,this.ESTRING2),this.showNote(s+3,this.ESTRING1),this.showNote(s+3,this.BSTRING),this.showNote(s+2,this.GSTRING),this.showNote(s+2,this.DSTRING),this.showNote(s+2,this.ASTRING),this.showNote(s+3,this.ESTRING2);var i={name:"Box 1",points:[["M",0,0,1],["L",3,0,1],["R",3,0,3],["L",3,1,3],["R",3,1,5],["L",2,2,2],["L",2,4,4],["L",3,5,1],["R",3,5,3],["R",3,5,5],["L",0,5,5],["R",0,5,7],["L",0,0,7],["R",0,0,1]],extras:[{name:"Major Notes",class:"major",notes:[[2,0],[2,1],[1,2]]},{name:"Minor Notes",class:"minor",notes:[[-1,2],[1,1]]}]};this.drawShape(e,i.points)}},drawBox2(e,t){let s=parseInt(e);if(!(e<0||e>19)){this.showNote(s,this.ESTRING1),this.showNote(s,this.BSTRING),this.showNote(s+1,this.GSTRING),this.showNote(s+2,this.ESTRING1),this.showNote(s+2,this.BSTRING);var i=this.notes[s][this.ESTRING1],n=this.notes[s+2][this.ESTRING1],r=this.notes[s+2][this.BSTRING],o=this.notes[s+1][this.GSTRING],h=this.notes[s][this.BSTRING],a="M"+this.addPointToString(i.box[1].x,i.box[1].y);a+="L"+this.addPointToString(n.box[1].x,n.box[1].y),a+=this.CORNERRADIUS+this.addPointToString(n.box[3].x,n.box[3].y),a+="L"+this.addPointToString(r.box[3].x,r.box[3].y),a+=this.CORNERRADIUS+this.addPointToString(r.box[5].x,r.box[5].y),a+="L"+this.addPointToString(o.box[2].x,o.box[2].y),a+="L"+this.addPointToString(o.box[3].x,o.box[3].y),a+=this.CORNERRADIUS+this.addPointToString(o.box[5].x,o.box[5].y),a+=this.CORNERRADIUS+this.addPointToString(o.box[7].x,o.box[7].y),a+="L"+this.addPointToString(o.box[0].x,o.box[0].y),a+="L"+this.addPointToString(h.box[5].x,h.box[5].y),a+=this.CORNERRADIUS+this.addPointToString(h.box[7].x,h.box[7].y),a+="L"+this.addPointToString(i.box[7].x,i.box[7].y),a+=this.CORNERRADIUS+this.addPointToString(i.box[1].x,i.box[1].y),a+="Z";var l={name:"Box 2",points:[["M",0,0,1],["L",2,0,1],["R",2,0,3],["L",2,1,3],["R",2,1,5],["L",1,2,2],["L",1,2,3],["R",1,2,5],["R",1,2,7],["L",1,2,0],["L",0,1,5],["R",0,1,7],["L",0,0,7],["R",0,0,1]]};this.drawShape(e,l.points)}},drawBox3(e){this.drawBox2(e,3)},drawBox4(e){console.log("Drawing box 4 at "+e);let t=parseInt(e);if(!(e<0||e>18)){this.showNote(t,this.ESTRING1),this.showNote(t+3,this.ESTRING1),this.showNote(t+1,this.BSTRING),this.showNote(t+3,this.BSTRING),this.showNote(t+2,this.GSTRING);var s={name:"Box 2",points:[["M",0,0,1],["L",3,0,1],["R",3,0,3],["L",3,1,3],["R",3,1,5],["L",2,2,2],["L",2,2,3],["R",2,2,5],["R",2,2,7],["L",2,2,0],["L",1,1,5],["R",1,1,7],["L",1,1,0],["L",0,0,5],["R",0,0,7],["R",0,0,1]]};this.drawShape(e,s.points)}},drawBox5(e){this.drawBox1(e)},drawBackdoorPattern1(e,t){let s=parseInt(e);if(!(e<0||e>14)){this.showNote(s,this.ESTRING2),this.showNote(s+2,this.ESTRING2),this.showNote(s+4,this.ESTRING2),this.showNote(s+2,this.ASTRING),this.showNote(s+4,this.ASTRING),this.showNote(s+2,this.DSTRING),this.showNote(s+4,this.DSTRING),this.showNote(s+6,this.DSTRING),this.showNote(s+4,this.GSTRING),this.showNote(s+6,this.GSTRING),this.showNote(s+5,this.BSTRING);var i={name:"Backdoor Pattern (1)",points:[["M",0,5,1],["L",2,5,0],["L",2,3,7],["R",2,3,1],["L",4,3,0],["L",4,2,7],["R",4,2,1],["L",5,1,6],["L",5,1,7],["R",5,1,1],["R",5,1,3],["L",5,1,4],["L",6,2,1],["R",6,2,3],["L",6,3,3],["R",6,3,5],["L",4,4,2],["L",4,5,3],["R",4,5,5],["L",0,5,5],["R",0,5,7],["R",0,5,1]]};this.drawShape(e,i.points)}},drawBackdoorPattern2(e,t){let s=parseInt(e);if(!(e<0||e>15)){this.showNote(s,this.ESTRING2),this.showNote(s+2,this.ESTRING2),this.showNote(s,this.ASTRING),this.showNote(s+2,this.ASTRING),this.showNote(s+4,this.ASTRING),this.showNote(s+2,this.DSTRING),this.showNote(s+4,this.DSTRING),this.showNote(s+2,this.GSTRING),this.showNote(s+4,this.GSTRING),this.showNote(s+6,this.GSTRING),this.showNote(s+5,this.BSTRING);var i=this.notes[s][this.ESTRING2],n=this.notes[s][this.ASTRING],r=this.notes[s+2][this.DSTRING],o=this.notes[s+2][this.GSTRING],h=this.notes[s+5][this.BSTRING],a=this.notes[s+6][this.GSTRING],l=this.notes[s+4][this.DSTRING],c=this.notes[s+4][this.ASTRING],u=this.notes[s+2][this.ESTRING2],f="M"+this.addPointToString(i.box[7].x,i.box[7].y);f+="L"+this.addPointToString(n.box[7].x,n.box[7].y),f+=this.CORNERRADIUS+this.addPointToString(n.box[1].x,n.box[1].y),f+="L"+this.addPointToString(r.box[6].x,r.box[6].y),f+="L"+this.addPointToString(o.box[7].x,o.box[7].y),f+=this.CORNERRADIUS+this.addPointToString(o.box[1].x,o.box[1].y),f+="L"+this.addPointToString(h.box[6].x,h.box[6].y),f+="L"+this.addPointToString(h.box[7].x,h.box[7].y),f+=this.CORNERRADIUS+this.addPointToString(h.box[1].x,h.box[1].y),f+=this.CORNERRADIUS+this.addPointToString(h.box[3].x,h.box[3].y),f+="L"+this.addPointToString(h.box[4].x,h.box[4].y),f+="L"+this.addPointToString(a.box[1].x,a.box[1].y),f+=this.CORNERRADIUS+this.addPointToString(a.box[3].x,a.box[3].y),f+=this.CORNERRADIUS+this.addPointToString(a.box[5].x,a.box[5].y),f+="L"+this.addPointToString(l.box[2].x,l.box[2].y),f+="L"+this.addPointToString(c.box[3].x,c.box[3].y),f+=this.CORNERRADIUS+this.addPointToString(c.box[5].x,c.box[5].y),f+="L"+this.addPointToString(u.box[2].x,u.box[2].y),f+="L"+this.addPointToString(u.box[3].x,u.box[3].y),f+=this.CORNERRADIUS+this.addPointToString(u.box[5].x,u.box[5].y),f+="L"+this.addPointToString(i.box[5].x,i.box[5].y),f+=this.CORNERRADIUS+this.addPointToString(i.box[7].x,i.box[7].y),f+="Z",this.allShapes.path(f).fill(this.SHAPEFILL).stroke(this.SHAPESTROKE)}},showNote(e,t,s){e<0||e>21||(this.notes[e][t].svgElement.show(),s!==void 0?this.notes[e][t].svgElement.fill(s):this.notes[e][t].svgElement.fill(this.NOTECOLOR))},drawBoxes(e){this.drawBox1(e),this.drawBox2(e+3),this.drawBox3(e+5),this.drawBox4(e+7),this.drawBox5(e+9)},drawRootNotes(e,t,s){if(!s)switch(t){case 1:this.showNote(e,this.ESTRING1,this.CHORDI),this.showNote(e+12,this.ESTRING1,this.CHORDI),this.showNote(e+5,this.BSTRING,this.CHORDI),this.showNote(e+17,this.BSTRING,this.CHORDI),this.showNote(e+9,this.GSTRING,this.CHORDI),this.showNote(e+21,this.GSTRING,this.CHORDI),this.showNote(e-3,this.GSTRING,this.CHORDI),this.showNote(e+2,this.DSTRING,this.CHORDI),this.showNote(e+14,this.DSTRING,this.CHORDI),this.showNote(e-10,this.DSTRING,this.CHORDI),this.showNote(e+7,this.ASTRING,this.CHORDI),this.showNote(e+19,this.ASTRING,this.CHORDI),this.showNote(e-5,this.ASTRING,this.CHORDI),this.showNote(e,this.ESTRING2,this.CHORDI),this.showNote(e+12,this.ESTRING2,this.CHORDI);break;case 4:this.showNote(e+5,this.ESTRING1,this.CHORDIV),this.showNote(e+17,this.ESTRING1,this.CHORDIV),this.showNote(e-7,this.ESTRING1,this.CHORDIV),this.showNote(e+10,this.BSTRING,this.CHORDIV),this.showNote(e+22,this.BSTRING,this.CHORDIV),this.showNote(e-2,this.BSTRING,this.CHORDIV),this.showNote(e+2,this.GSTRING,this.CHORDIV),this.showNote(e+14,this.GSTRING,this.CHORDIV),this.showNote(e-10,this.GSTRING,this.CHORDIV),this.showNote(e+7,this.DSTRING,this.CHORDIV),this.showNote(e+19,this.DSTRING,this.CHORDIV),this.showNote(e-5,this.DSTRING,this.CHORDIV),this.showNote(e,this.ASTRING,this.CHORDIV),this.showNote(e+12,this.ASTRING,this.CHORDIV),this.showNote(e+5,this.ESTRING2,this.CHORDIV),this.showNote(e+17,this.ESTRING2,this.CHORDIV),this.showNote(e-7,this.ESTRING2,this.CHORDIV);break;case 5:this.showNote(e+7,this.ESTRING1,this.CHORDV),this.showNote(e+19,this.ESTRING1,this.CHORDV),this.showNote(e-5,this.ESTRING1,this.CHORDV),this.showNote(e,this.BSTRING,this.CHORDV),this.showNote(e+12,this.BSTRING,this.CHORDV),this.showNote(e+4,this.GSTRING,this.CHORDV),this.showNote(e+16,this.GSTRING,this.CHORDV),this.showNote(e-8,this.GSTRING,this.CHORDV),this.showNote(e-3,this.DSTRING,this.CHORDV),this.showNote(e+9,this.DSTRING,this.CHORDV),this.showNote(e+21,this.DSTRING,this.CHORDV),this.showNote(e+2,this.ASTRING,this.CHORDV),this.showNote(e+14,this.ASTRING,this.CHORDV),this.showNote(e-10,this.ASTRING,this.CHORDV),this.showNote(e+7,this.ESTRING2,this.CHORDV),this.showNote(e+19,this.ESTRING2,this.CHORDV),this.showNote(e-5,this.ESTRING2,this.CHORDV);break}},resetFretboard(){for(let e=0;e<this.notes.length;e++)for(let t=0;t<this.notes[e].length;t++)this.notes[e][t].svgElement.hide();for(let e=0;e<this.fretMarkers.length;e++)this.fretMarkers[e].hide();this.allShapes.clear()},refreshUI(){this.resetFretboard(),Ms(),!this.selectionsAvailable&&this.rightDrawerOpen&&this.toggleResultPanel(!1),this.updateFretboard()},resetFilters(){this.accBoxes=[],this.accBoxes=[],this.accPatterns=[],this.accScales=[],this.accRootNotes=[],this.refreshUI()},getDotID(e,t,s){return"#Dot-"+(e+t)+"-"+s},drawFretMarker(e,t){e>=0&&e<22&&(this.fretMarkers[e].fill({color:t,opacity:this.CHORDOPACITY}),this.fretMarkers[e].show())},computeOffsets(){for(let e=0;e<this.Frets.length;e++)this.yoffsets.push((this.notes[e][this.BSTRING].y-this.notes[e][this.ESTRING1].y)/2),e<this.Frets.length-1&&this.xoffsets.push((this.Frets[e+1].pt1.x-this.Frets[e].pt1.x)/4)},createFrets(){this.allFrets=this.Drawing.group(),this.Frets.push({pt1:{x:47.33,y:54.2},pt2:{x:47.33,y:264.5}}),this.Frets.push({pt1:{x:241.33,y:48},pt2:{x:241.33,y:265}}),this.Frets.push({pt1:{x:417.33,y:46},pt2:{x:417.33,y:270}}),this.Frets.push({pt1:{x:583.33,y:41},pt2:{x:583.33,y:273}}),this.Frets.push({pt1:{x:743.33,y:37.36},pt2:{x:743.33,y:276.49}}),this.Frets.push({pt1:{x:892.33,y:35},pt2:{x:892.33,y:279.49}}),this.Frets.push({pt1:{x:1036.33,y:31},pt2:{x:1036.33,y:281.49}}),this.Frets.push({pt1:{x:1171.33,y:29},pt2:{x:1171.33,y:282.49}}),this.Frets.push({pt1:{x:1298.33,y:27},pt2:{x:1298.33,y:283.49}}),this.Frets.push({pt1:{x:1417.33,y:23},pt2:{x:1417.33,y:284.49}}),this.Frets.push({pt1:{x:1531.33,y:22},pt2:{x:1531.33,y:287.49}}),this.Frets.push({pt1:{x:1640.33,y:19},pt2:{x:1640.33,y:287.49}}),this.Frets.push({pt1:{x:1740.33,y:18.41},pt2:{x:1740.33,y:290.49}}),this.Frets.push({pt1:{x:1836.33,y:16},pt2:{x:1836.33,y:291.49}}),this.Frets.push({pt1:{x:1926.33,y:14},pt2:{x:1926.33,y:292.49}}),this.Frets.push({pt1:{x:2012.33,y:12},pt2:{x:2012.33,y:293.49}}),this.Frets.push({pt1:{x:2093.33,y:10},pt2:{x:2093.33,y:294.49}}),this.Frets.push({pt1:{x:2168.33,y:9},pt2:{x:2168.33,y:296.49}}),this.Frets.push({pt1:{x:2241.33,y:5},pt2:{x:2241.33,y:297.49}}),this.Frets.push({pt1:{x:2308.33,y:6},pt2:{x:2308.33,y:297.49}}),this.Frets.push({pt1:{x:2372.33,y:6},pt2:{x:2372.33,y:299.49}}),this.Frets.push({pt1:{x:2433.33,y:5},pt2:{x:2433.33,y:299.49}});for(let t=0;t<this.Frets.length;t++){var e;t==0?(e=this.allFrets.rect(this.FRETWIDTH*1.5,this.Frets[t].pt2.y-this.Frets[t].pt1.y),e.move(this.Frets[t].pt1.x-this.FRETWIDTH/2,this.Frets[t].pt1.y),e.fill("#555")):(e=this.allFrets.rect(this.FRETWIDTH,this.Frets[t].pt2.y-this.Frets[t].pt1.y),e.radius(this.FRETWIDTH/4),e.move(this.Frets[t].pt1.x-this.FRETWIDTH/2,this.Frets[t].pt1.y),e.fill(this.fretGradient)),this.Frets[t].svgElement=e}},createFretMarkers(){this.allMarkers=this.Drawing.group();let e=this.FRETWIDTH/2,t=60,s=this.Frets;s=[],s.push({pt1:{x:-17,y:54},pt2:{x:-17,y:264}});for(let r=0;r<this.Frets.length;r++)s.push(this.Frets[r]);for(let r=1;r<s.length;r++){var i=s[r-1].pt1.x+e+","+(s[r-1].pt1.y-t)+" ";i+=s[r-1].pt2.x+e+","+(s[r-1].pt2.y+t)+" ",i+=s[r].pt2.x-e+","+(s[r].pt2.y+t)+" ",i+=s[r].pt1.x-e+","+(s[r].pt1.y-t);var n=this.allMarkers.polygon(i);n.fill("none"),n.stroke("none"),this.fretMarkers.push(n)}}},props:{fetchDrawer:{type:Boolean,default:!1}},setup(){return{SVG:je}}}),ko=e=>(Xi("data-v-f9d1bf0e"),e=e(),Ui(),e),Co={class:""},Ao={class:"text-caption"},Go=mt("Start Here"),Mo=mt("Set Key"),Po=mt("Boxes"),Bo=mt("Patterns"),Lo=mt("Scales"),qo=mt("Root Notes"),zo=ko(()=>Tt("div",{id:"fretboard-container",class:"bg-black"},[Tt("div",{id:"fretboard-zoom-wrapper"},[Tt("div",{id:"fretboard"},[Tt("svg",{width:"100%",viewBox:"-247 -596 2836 2117",id:"fretboard-wrapper","shape-rendering":"geometricPrecision"})])])],-1)),Fo=mt("Selections"),Vo={key:0,class:"col-12"},Ho={key:1,class:"col-12 text-right"};function jo(e,t,s,i,n,r){return W(),pt(Ki,null,{default:y(()=>[p(Qi,{inset:"",class:"q-electron-drag"},{default:y(()=>[p(Ss),Tt("div",Co,[Tt("sup",Ao,"Current Key: "+Le(e.key),1)]),p(Ss),Tt("div",null,[bt((W(),pt(dt,{clickable:"",dense:""},{default:y(()=>[p(j,{class:"rounded",avatar:""},{default:y(()=>[p(lt,{size:"lg",name:"mdi-cogs"})]),_:1}),p(j,null,{default:y(()=>[p(Nt,{overline:""},{default:y(()=>[Go]),_:1})]),_:1})]),_:1})),[[wt]]),p(Pt,null,{default:y(()=>[p(Pe,{separator:"",bordered:"",dense:""},{default:y(()=>[bt((W(),pt(dt,{clickable:""},{default:y(()=>[p(j,{avatar:""},{default:y(()=>[p(lt,{name:"key"})]),_:1}),p(j,null,{default:y(()=>[Mo]),_:1}),p(Pt,{"transition-duration":"650","transition-show":"flip-down","transition-hide":"fade",fit:"",anchor:"top right",self:"top left","auto-close":"",separator:""},{default:y(()=>[p(Pe,{dense:"",separator:""},{default:y(()=>[(W(!0),Se(Is,null,Rs(e.keyOptions,o=>bt((W(),pt(dt,{key:o,clickable:"",onClick:h=>e.setKey(o)},{default:y(()=>[p(j,{avatar:""},{default:y(()=>[p(lt,{name:"music_clef_treble"})]),_:1}),p(j,null,{default:y(()=>[p(Nt,null,{default:y(()=>[mt(Le(o),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[wt]])),128))]),_:1})]),_:1})]),_:1})),[[wt]]),bt((W(),pt(dt,{clickable:""},{default:y(()=>[p(j,{avatar:""},{default:y(()=>[p(Zt,{size:"2.75em",icon:"widgets",class:"q-ml-none"})]),_:1}),p(j,null,{default:y(()=>[p(Nt,null,{default:y(()=>[Po]),_:1})]),_:1}),p(Pt,{"transition-duration":"650","transition-show":"flip-down","transition-hide":"fade",fit:"",anchor:"top right",self:"top left","auto-close":"",separator:""},{default:y(()=>[p(be,{modelValue:e.accBoxes,"onUpdate:modelValue":t[0]||(t[0]=o=>e.accBoxes=o),options:e.boxSelections,class:"q-mx-lg q-my-xs",color:"accent",type:"toggle",onInput:e.updateFretboard},null,8,["modelValue","options","onInput"]),p(we)]),_:1})]),_:1})),[[wt]]),bt((W(),pt(dt,{clickable:"",icon:"rounded_corner"},{default:y(()=>[p(j,{avatar:""},{default:y(()=>[p(Zt,{size:"2.75em",icon:"rounded_corner"})]),_:1}),p(j,null,{default:y(()=>[p(Nt,null,{default:y(()=>[Bo]),_:1})]),_:1}),p(Pt,{"transition-duration":"650","transition-show":"flip-down","transition-hide":"fade",fit:"",anchor:"top right",self:"top left","auto-close":"",separator:""},{default:y(()=>[p(be,{modelValue:e.accPatterns,"onUpdate:modelValue":t[1]||(t[1]=o=>e.accPatterns=o),options:e.patternSelections,color:"accent",type:"toggle",onInput:e.updateFretboard},null,8,["modelValue","options","onInput"]),p(we)]),_:1})]),_:1})),[[wt]]),bt((W(),pt(dt,{clickable:""},{default:y(()=>[p(j,{avatar:""},{default:y(()=>[p(Zt,{size:"2.75em",icon:"queue_music"})]),_:1}),p(j,null,{default:y(()=>[p(Nt,null,{default:y(()=>[Lo]),_:1})]),_:1}),p(Pt,{"transition-duration":"650","transition-show":"flip-down","transition-hide":"fade",fit:"",anchor:"top right",self:"top left","auto-close":"",separator:""},{default:y(()=>[p(be,{modelValue:e.accScales,"onUpdate:modelValue":t[2]||(t[2]=o=>e.accScales=o),options:e.scaleFilters,color:"accent",type:"toggle",onInput:e.updateFretboard},null,8,["modelValue","options","onInput"]),p(we)]),_:1})]),_:1})),[[wt]]),bt((W(),pt(dt,{clickable:"",icon:"music_note",label:"Root Notes"},{default:y(()=>[p(j,{avatar:""},{default:y(()=>[p(Zt,{size:"2.75em",icon:"music_note"})]),_:1}),p(j,null,{default:y(()=>[p(Nt,null,{default:y(()=>[qo]),_:1})]),_:1}),p(Pt,{"transition-duration":"650","transition-show":"flip-down","transition-hide":"fade",fit:"",anchor:"top right",self:"top left","auto-close":"",separator:""},{default:y(()=>[p(be,{modelValue:e.accRootNotes,"onUpdate:modelValue":t[3]||(t[3]=o=>e.accRootNotes=o),options:e.rootNoteFilters,color:"accent",type:"toggle",onInput:e.updateFretboard},null,8,["modelValue","options","onInput"]),p(we)]),_:1})]),_:1})),[[wt]])]),_:1})]),_:1})])]),_:1}),zo,p(hn,{position:"bottom-right",offset:[18,18]},{default:y(()=>[bt(p(nn,{icon:"add",direction:"left",color:"accent"},{default:y(()=>[p(Ts,{onClick:e.resetFilters,color:"accent",icon:"restart_alt",label:"Reset"},null,8,["onClick"]),p(Ts,{onClick:t[4]||(t[4]=o=>e.selectionDialog=!0),color:"accent",icon:"rule",label:"Selections"})]),_:1},512),[[$i,e.selectionsAvailable]])]),_:1}),p(pn,{modelValue:e.selectionDialog,"onUpdate:modelValue":t[6]||(t[6]=o=>e.selectionDialog=o)},{default:y(()=>[p(fn,{class:"q-mx-sm column wrap justify-evenly items-center bg-primary content-around",style:{width:"275px","border-top-right-radius":"2.75em","border-bottom-left-radius":"2.75em"}},{default:y(()=>[p(un,null,{default:y(()=>[p(Pe,{dense:""},{default:y(()=>[p(dt,{class:"text-accent",dense:""},{default:y(()=>[p(j,{avatar:""},{default:y(()=>[p(lt,{name:"done_all"})]),_:1}),p(Nt,{class:"text-h5 text-weight-bolder"},{default:y(()=>[Fo]),_:1})]),_:1}),p(dt,{class:"q-py-md column",dense:""},{default:y(()=>[e.selectedOptions.length>0?(W(),Se("div",Vo,[(W(!0),Se(Is,null,Rs(e.selectedOptions,(o,h)=>(W(),pt(ln,{square:"",class:"glossy",key:h,onRemove:a=>e.removeFilter(o),color:"bg-black text-white",removable:"",dense:""},{default:y(()=>[p(Zt,{icon:o.icon,color:o.color||"deep-orange","text-color":"white"},null,8,["icon","color"]),mt(" "+Le(o.label),1)]),_:2},1032,["onRemove"]))),128))])):(W(),Se("div",Ho,"NO FILTERS SELECTED"))]),_:1})]),_:1})]),_:1}),p(cn,{align:"center"},{default:y(()=>[p(es,{flat:"",label:"Close",onClick:t[5]||(t[5]=o=>e.selectionDialog=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var sh=ji(Do,[["render",jo],["__scopeId","data-v-f9d1bf0e"]]);export{sh as default};
