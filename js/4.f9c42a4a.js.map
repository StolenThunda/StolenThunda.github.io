{"version":3,"sources":["webpack:///./src/components/tools/Tuner.vue?39f5","webpack:///./src/middleware/tools/tuner.js","webpack:///src/components/tools/Tuner.vue","webpack:///./src/components/tools/Tuner.vue?e1bc","webpack:///./src/components/tools/Tuner.vue","webpack:///./src/components/tools/Tuner.vue?a6c6","webpack:///./src/components/tools/Tuner.vue?1077"],"names":["Tuner","a4","middleA","semitone","bufferSize","noteStrings","initGetUserMedia","prototype","window","AudioContext","webkitAudioContext","alert","navigator","mediaDevices","undefined","getUserMedia","constraints","webkitGetUserMedia","mozGetUserMedia","Promise","resolve","reject","call","startRecord","self","audio","then","stream","audioContext","createMediaStreamSource","connect","analyser","scriptProcessor","destination","addEventListener","event","frequency","pitchDetector","do","inputBuffer","getChannelData","onNoteDetected","note","getNote","name","value","cents","getCents","octave","parseInt","catch","error","message","init","createAnalyser","createScriptProcessor","aubio","Pitch","sampleRate","Math","log","round","getStandardFrequency","pow","floor","play","oscillator","createOscillator","start","stop","Notes","selector","tuner","isAutoMode","$root","document","querySelector","$notesList","$frequency","$notes","$notesMap","createNotes","minOctave","maxOctave","n","$note","createElement","className","dataset","toString","innerHTML","appendChild","push","forEach","$active","classList","remove","update","active","clearActive","add","scrollLeft","offsetLeft","clientWidth","childNodes","textContent","parseFloat","toFixed","toggleAutoMode","Meter","$pointer","i","$scale","style","transform","deg","FrequencyBars","$canvas","width","body","height","clientHeight","canvasContext","getContext","data","length","clearRect","globalAlpha","fillStyle","fillRect","Application","localStorage","getItem","notes","meter","frequencyBars","lastNote","updateFrequencyBars","frequencyData","Uint8Array","frequencyBinCount","getByteFrequencyData","requestAnimationFrame","bind","app","computed","getA4","mounted","methods","setFreq","getFreq","dialog","title","prompt","model","type","cancel","onOk","console","onCancel","onDismiss"],"mappings":"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","file":"js/4.f9c42a4a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('canvas',{staticClass:\"frequency-bars\"}),_vm._m(0),_c('div',{staticClass:\"notes\"},[_c('div',{staticClass:\"notes-list\"}),_vm._m(1),_c('div',[_c('q-btn',{staticClass:\"q-ma-xl\",attrs:{\"color\":\"accent\",\"icon\":\"graphic_eq\",\"stacked\":\"\",\"push\":\"\",\"glossy\":\"\",\"rounded\":\"\"},on:{\"click\":_vm.getFreq}},[_c('div',[_vm._v(\"\\n          A\"),_c('sub',[_vm._v(\"4\")]),_vm._v(\"=\"),_c('span',[_vm._v(_vm._s(_vm.getA4)+\" \")]),_vm._v(\"\\n          Hz\\n        \")])])],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"meter\"},[_c('div',{staticClass:\"meter-dot\"}),_c('div',{staticClass:\"meter-pointer\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"frequency text-h5\"},[_c('span'),_vm._v(\"Hz\")])}]\n\nexport { render, staticRenderFns }","import swal from 'sweetalert2/dist/sweetalert2.js'\nimport aubio from \"aubiojs\"\nexport const Tuner = function ( a4 ) {\n  this.middleA = a4 || 440\n  this.semitone = 69\n  this.bufferSize = 4096\n  this.noteStrings = [\n    'C',\n    'C♯',\n    'D',\n    'D♯',\n    'E',\n    'F',\n    'F♯',\n    'G',\n    'G♯',\n    'A',\n    'A♯',\n    'B'\n  ]\n\n  this.initGetUserMedia()\n}\n\nTuner.prototype.initGetUserMedia = function() {\n  window.AudioContext = window.AudioContext || window.webkitAudioContext\n  if (!window.AudioContext) {\n    return alert('AudioContext not supported')\n  }\n\n  // Older browsers might not implement mediaDevices at all, so we set an empty object first\n  if (navigator.mediaDevices === undefined) {\n    navigator.mediaDevices = {}\n  }\n\n  // Some browsers partially implement mediaDevices. We can't just assign an object\n  // with getUserMedia as it would overwrite existing properties.\n  // Here, we will just add the getUserMedia property if it's missing.\n  if (navigator.mediaDevices.getUserMedia === undefined) {\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      // First get ahold of the legacy getUserMedia, if present\n      const getUserMedia =\n        navigator.webkitGetUserMedia || navigator.mozGetUserMedia\n\n      // Some browsers just don't implement it - return a rejected promise with an error\n      // to keep a consistent interface\n      if (!getUserMedia) {\n        alert('getUserMedia is not implemented in this browser')\n      }\n\n      // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n      return new Promise(function(resolve, reject) {\n        getUserMedia.call(navigator, constraints, resolve, reject)\n      })\n    }\n  }\n}\n\nTuner.prototype.startRecord = function () {\n  const self = this\n  navigator.mediaDevices\n    .getUserMedia({ audio: true })\n    .then(function(stream) {\n      self.audioContext.createMediaStreamSource(stream).connect(self.analyser)\n      self.analyser.connect(self.scriptProcessor)\n      self.scriptProcessor.connect(self.audioContext.destination)\n      self.scriptProcessor.addEventListener('audioprocess', function(event) {\n        const frequency = self.pitchDetector.do(\n          event.inputBuffer.getChannelData(0)\n        )\n        if (frequency && self.onNoteDetected) {\n          const note = self.getNote(frequency)\n          self.onNoteDetected({\n            name: self.noteStrings[note % 12],\n            value: note,\n            cents: self.getCents(frequency, note),\n            octave: parseInt(note / 12) - 1,\n            frequency: frequency\n          })\n        }\n      })\n    })\n    .catch(function(error) {\n      alert(error.name + ': ' + error.message)\n    })\n}\n\nTuner.prototype.init = function() {\n  this.audioContext = new  (window.AudioContext || window.webkitAudioContext)\n  this.analyser = this.audioContext.createAnalyser()\n  this.scriptProcessor = this.audioContext.createScriptProcessor(\n    this.bufferSize,\n    1,\n    1\n  )\n\n  const self = this\n\n  aubio().then(function(aubio) {\n    self.pitchDetector = new aubio.Pitch(\n      'default',\n      self.bufferSize,\n      1,\n      self.audioContext.sampleRate\n    )\n    self.startRecord()\n  })\n}\n\n/**\n * get musical note from frequency\n *\n * @param {number} frequency\n * @returns {number}\n */\nTuner.prototype.getNote = function(frequency) {\n  const note = 12 * (Math.log(frequency / this.middleA) / Math.log(2))\n  return Math.round(note) + this.semitone\n}\n\n/**\n * get the musical note's standard frequency\n *\n * @param note\n * @returns {number}\n */\nTuner.prototype.getStandardFrequency = function(note) {\n  return this.middleA * Math.pow(2, (note - this.semitone) / 12)\n}\n\n/**\n * get cents difference between given frequency and musical note's standard frequency\n *\n * @param {number} frequency\n * @param {number} note\n * @returns {number}\n */\nTuner.prototype.getCents = function(frequency, note) {\n  return Math.floor(\n    (1200 * Math.log(frequency / this.getStandardFrequency(note))) / Math.log(2)\n  )\n}\n\n/**\n * play the musical note\n *\n * @param {number} frequency\n */\nTuner.prototype.play = function(frequency) {\n  if (!this.oscillator) {\n    this.oscillator = this.audioContext.createOscillator()\n    this.oscillator.connect(this.audioContext.destination)\n    this.oscillator.start()\n  }\n  this.oscillator.frequency.value = frequency\n}\n\nTuner.prototype.stop = function() {\n  this.oscillator.stop()\n  this.oscillator = null\n}\nexport const Notes = function ( selector, tuner ) {\n  this.tuner = tuner\n  this.isAutoMode = true\n  this.$root = document.querySelector(selector)\n  this.$notesList = this.$root.querySelector('.notes-list')\n  this.$frequency = this.$root.querySelector('.frequency')\n  this.$notes = []\n  this.$notesMap = {}\n  this.createNotes()\n}\n\nNotes.prototype.createNotes = function() {\n  const minOctave = 2\n  const maxOctave = 5\n  for (var octave = minOctave; octave <= maxOctave; octave += 1) {\n    for (var n = 0; n < 12; n += 1) {\n      const $note = document.createElement('div')\n      $note.className = 'note'\n      $note.dataset.name = this.tuner.noteStrings[n]\n      $note.dataset.value = 12 * (octave + 1) + n\n      $note.dataset.octave = octave.toString()\n      $note.dataset.frequency = this.tuner.getStandardFrequency(\n        $note.dataset.value\n      )\n      $note.innerHTML =\n        $note.dataset.name[0] +\n        '<span class=\"note-sharp\">' +\n        ($note.dataset.name[1] || '') +\n        '</span>' +\n        '<span class=\"note-octave\">' +\n        $note.dataset.octave +\n        '</span>'\n      this.$notesList.appendChild($note)\n      this.$notes.push($note)\n      this.$notesMap[$note.dataset.value] = $note\n    }\n  }\n\n  const self = this\n  this.$notes.forEach(function($note) {\n    $note.addEventListener('click', function() {\n      if (self.isAutoMode) {\n        return\n      }\n\n      const $active = self.$notesList.querySelector('.active')\n      if ($active === this) {\n        self.tuner.stop()\n        $active.classList.remove('active')\n      } else {\n        self.tuner.play(this.dataset.frequency)\n        self.update($note.dataset)\n      }\n    })\n  })\n}\n\nNotes.prototype.active = function($note) {\n  this.clearActive()\n  $note.classList.add('active')\n  this.$notesList.scrollLeft =\n    $note.offsetLeft - (this.$notesList.clientWidth - $note.clientWidth) / 2\n}\n\nNotes.prototype.clearActive = function() {\n  const $active = this.$notesList.querySelector('.active')\n  if ($active) {\n    $active.classList.remove('active')\n  }\n}\n\nNotes.prototype.update = function ( note ) {\n  if (note.value in this.$notesMap) {\n    this.active(this.$notesMap[note.value])\n    this.$frequency.childNodes[0].textContent = parseFloat(\n      note.frequency\n    ).toFixed(1)\n  }\n}\n\nNotes.prototype.toggleAutoMode = function() {\n  if (this.isAutoMode) {\n    this.clearActive()\n  }\n  this.isAutoMode = !this.isAutoMode\n}\n\n/**\n * @param {string} selector\n * @constructor\n */\nexport const Meter = function(selector) {\n  this.$root = document.querySelector(selector)\n  this.$pointer = this.$root.querySelector('.meter-pointer')\n  this.init()\n}\n\nMeter.prototype.init = function() {\n  for (var i = 0; i <= 10; i += 1) {\n    const $scale = document.createElement('div')\n    $scale.className = 'meter-scale'\n    $scale.style.transform = 'rotate(' + (i * 9 - 45) + 'deg)'\n    if (i % 5 === 0) {\n      $scale.classList.add('meter-scale-strong')\n    }\n    this.$root.appendChild($scale)\n  }\n}\n\n/**\n * @param {number} deg\n */\nMeter.prototype.update = function(deg) {\n  this.$pointer.style.transform = 'rotate(' + deg + 'deg)'\n}\n\n/**\n * the frequency histogram\n *\n * @param {string} selector\n * @constructor\n */\nexport const FrequencyBars = function(selector) {\n  this.$canvas = document.querySelector(selector)\n  this.$canvas.width = document.body.clientWidth\n  this.$canvas.height = document.body.clientHeight / 2\n  this.canvasContext = this.$canvas.getContext('2d')\n}\n\n/**\n * @param {Uint8Array} data\n */\nFrequencyBars.prototype.update = function ( data ) {\n  const length = 64 // low frequency only\n  const width = this.$canvas.width / length - 0.5\n  this.canvasContext.clearRect( 0, 0, this.$canvas.width, this.$canvas.height )\n  this.canvasContext.globalAlpha = 0.35;\n  for (var i = 0; i < length; i += 1) {\n    this.canvasContext.fillStyle = '#ef6c00'\n    this.canvasContext.fillRect(\n      i * (width + 0.5),\n      this.$canvas.height - data[i],\n      width,\n      data[i]\n    )\n  }\n}\n\nexport const Application = function () {\n  this.a4 = parseInt(localStorage.getItem('a4')) || 440\n  this.tuner = new Tuner(this.a4)\n  this.notes = new Notes('.notes', this.tuner)\n  this.meter = new Meter('.meter')\n  this.frequencyBars = new FrequencyBars('.frequency-bars')\n  this.update({ name: 'A', frequency: this.a4, octave: 4, value: 69, cents: 0 })\n}\n\nApplication.prototype.start = function() {\n  const self = this\n\n  this.tuner.onNoteDetected = function(note) {\n    if (self.notes.isAutoMode) {\n      if (self.lastNote === note.name) {\n        self.update(note)\n      } else {\n        self.lastNote = note.name\n      }\n    }\n  }\n\n  this.updateFrequencyBars()\n  this.tuner.init()\n  this.frequencyData = new Uint8Array(self.tuner.analyser.frequencyBinCount)\n}\n\nApplication.prototype.updateFrequencyBars = function () {\n  if (this.tuner.analyser) {\n    this.tuner.analyser.getByteFrequencyData(this.frequencyData)\n    this.frequencyBars.update(this.frequencyData)\n  }\n  requestAnimationFrame(this.updateFrequencyBars.bind(this))\n}\n\nApplication.prototype.update = function(note) {\n  this.notes.update(note)\n  this.meter.update((note.cents / 50) * 45)\n}\n\n// noinspection JSUnusedGlobalSymbols\nApplication.prototype.toggleAutoMode = function() {\n  this.notes.toggleAutoMode()\n}\n","<template>\n  <div>\n    <canvas class=\"frequency-bars\"></canvas>\n    <div class=\"meter\">\n      <div class=\"meter-dot\"></div>\n      <div class=\"meter-pointer\"></div>\n    </div>\n    <div class=\"notes\">\n      <div class=\"notes-list\"></div>\n      <div class=\"frequency text-h5\"><span></span>Hz</div>\n      <div>\n        <!-- <q-btn\n          class=\"q-ma-xl\"\n          color=\"accent\"\n          @click=\"getFreq\"\n          label=\"Change Frequency\"\n        /> -->\n       <q-btn\n        class=\"q-ma-xl\"\n          color=\"accent\"\n          @click=\"getFreq\"\n          icon=\"graphic_eq\"\n          stacked \n          push\n          glossy\n          rounded\n          >\n          <div>\n            A<sub>4</sub>=<span>{{ getA4 }} </span>\n            Hz\n          </div>\n        </q-btn>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { Application } from \"../../middleware/tools/tuner.js\";\n\nexport default {\n  name: \"Tuner\",\n  data: () => ({\n    app: null,\n  }),\n  computed: {\n    getA4() {\n      return this.app?.a4 || \"440\";\n    },\n  },\n  mounted() {\n    this.app =  new Application()\n    this.app.start();\n  },\n  methods: {\n    setFreq(freq) {\n      this.app.a4 = freq;\n      this.app.tuner.middleA = freq;\n      this.app.notes.createNotes();\n      this.app.update({\n        name: \"A\",\n        frequency: this.app.a4,\n        octave: 4,\n        value: 69,\n        cents: 0,\n      });\n      localStorage.setItem(\"a4\", freq);\n    },\n    getFreq() {\n      this.$q\n        .dialog({\n          title: \"Frequency\",\n          message: \"What frequency would you like to tune to?\",\n          prompt: {\n            model: this.app.a4 || 440,\n            type: \"number\", // optional\n          },\n          cancel: true,\n        })\n        .onOk((data) => {\n          console.log(\">>>> OK, received\", data);\n          this.setFreq(data);\n        })\n        .onCancel(() => {\n          // console.log('>>>> Cancel')\n        })\n        .onDismiss(() => {\n          // console.log('I am triggered on both OK and Cancel')\n        });\n    },\n  },\n};\n</script>\n\n<style>\nhtml {\n  height: 100%;\n}\n\nbody {\n  position: fixed;\n  font-family: sans-serif;\n  color: #2c3e50;\n  margin: 0;\n  width: 100%;\n  height: 100%;\n  cursor: default;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n}\n\n.notes {\n  margin: auto;\n  width: 400px;\n  position: fixed;\n  top: 50%;\n  left: 0;\n  right: 0;\n  text-align: center;\n}\n\n.note {\n  font-size: 90px;\n  font-weight: bold;\n  position: relative;\n  display: inline-block;\n  padding-right: 30px;\n  padding-left: 10px;\n}\n\n.note.active {\n  color: #ef6c00;\n}\n\n.notes-list {\n  overflow: auto;\n  overflow: -moz-scrollbars-none;\n  white-space: nowrap;\n  -ms-overflow-style: none;\n  -webkit-mask-image: -webkit-linear-gradient(\n    left,\n    rgba(255, 255, 255, 0),\n    #fff,\n    rgba(255, 255, 255, 0)\n  );\n}\n\n.notes-list::-webkit-scrollbar {\n  display: none;\n}\n\n.note {\n  -webkit-tap-highlight-color: transparent;\n}\n\n.note span {\n  position: absolute;\n  right: 0.25em;\n  font-size: 40%;\n  font-weight: normal;\n}\n\n.note-sharp {\n  top: 0.3em;\n}\n\n.note-octave {\n  bottom: 0.3em;\n}\n\n/* .frequency {\n  font-size: 32px;\n} */\n\n/* .frequency span {\n  font-size: 50%;\n  margin-left: 0.25em;\n} */\n\n.meter {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 50%;\n  width: 400px;\n  height: 33%;\n  margin: 0 auto 5vh auto;\n}\n\n.meter-pointer {\n  width: 2px;\n  height: 100%;\n  background: #2c3e50;\n  transform: rotate(45deg);\n  transform-origin: bottom;\n  transition: transform 0.5s;\n  position: absolute;\n  right: 50%;\n}\n\n.meter-dot {\n  width: 10px;\n  height: 10px;\n  background: #2c3e50;\n  border-radius: 50%;\n  position: absolute;\n  bottom: -5px;\n  right: 50%;\n  margin-right: -4px;\n}\n\n.meter-scale {\n  width: 1px;\n  height: 100%;\n  transform-origin: bottom;\n  transition: transform 0.2s;\n  box-sizing: border-box;\n  border-top: 10px solid;\n  position: absolute;\n  right: 50%;\n}\n\n.meter-scale-strong {\n  width: 2px;\n  border-top-width: 20px;\n}\n\n.frequency-bars {\n  position: fixed;\n  bottom: 0;\n}\n\n@media (max-width: 768px) {\n  .meter {\n    width: 100%;\n  }\n\n  .notes {\n    width: 100%;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!../../../node_modules/@quasar/app/node_modules/vue-loader/lib/index.js??vue-loader-options!./Tuner.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!../../../node_modules/@quasar/app/node_modules/vue-loader/lib/index.js??vue-loader-options!./Tuner.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tuner.vue?vue&type=template&id=31b56587&\"\nimport script from \"./Tuner.vue?vue&type=script&lang=js&\"\nexport * from \"./Tuner.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tuner.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@quasar/app/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport qInstall from \"../../../node_modules/@quasar/app/lib/webpack/runtime.auto-import.js\";\nqInstall(component, 'components', {QBtn});\n","// extracted by mini-css-extract-plugin","export * from \"-!../../../node_modules/@quasar/app/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-2-0!../../../node_modules/@quasar/app/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-2-1!../../../node_modules/@quasar/app/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-2-2!../../../node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!../../../node_modules/@quasar/app/node_modules/vue-loader/lib/index.js??vue-loader-options!./Tuner.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}